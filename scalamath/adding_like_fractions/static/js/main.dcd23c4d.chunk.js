(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(t,e,s){t.exports=s(17)},16:function(t,e,s){},17:function(t,e,s){"use strict";s.r(e);var a,o,r,n,i,c,l,p,u=s(0),d=s.n(u),h=s(9),m=s.n(h),b=(s(16),s(3)),g=s(4),f=s(6),k=s(5),v=s(7),y=s(2),w=s(1),E=s.n(w),O=function(t){function e(){var t;return Object(b.a)(this,e),(t=Object(f.a)(this,Object(k.a)(e).call(this))).state={pointTotal:null},t}return Object(v.a)(e,t),Object(g.a)(e,[{key:"componentDidMount",value:function(){this.setState({pointTotal:this.props.pointtotal})}},{key:"render",value:function(){var t,e,s,a;if(e=this.props.clickData,"learn"===this.props.curmode)if(this.props.clickData.learn["step".concat(this.props.order)])t="",s="",a=this.props.clickData.learn["step".concat(this.props.order)];else if(this.props.curbut-1===this.props.order){var o;t="uk-animation-slide-right-small",a=this.props.points,e.learn["step".concat(this.props.order)]=this.props.points,e.score+=this.props.points,s="+",this.props.curbut-1===1?o=document.getElementById("doneprob1"):this.props.curbut-1===2?o=document.getElementById("doneprob3"):this.props.curbut-1===3?o=document.getElementById("doneprob4"):this.props.curbut-1===4?o=document.getElementById("doneprob5"):this.props.curbut-1>=5&&(o=document.getElementById("doneprob6")),o.volume=.1,o.play()}else t="rewardHidden",s="",a="";else if("test"===this.props.curmode&&this.props.testnum%this.props.pnum!==0){var r=this.props.testnum%this.props.pnum;if(this.props.clickData["test".concat(r)]["step".concat(this.props.order)])t="uk-animation-slide-right-small",s="",a=this.props.clickData["test".concat(this.props.testnum)]["step".concat(this.props.order)];else if(this.props.curans-1===this.props.order){var n;t="uk-animation-slide-right-small",a=this.props.points,e["test".concat(r)]["step".concat(this.props.order)]=this.props.points,e.score+=this.props.points,s="+",this.props.curans-1===1?n=document.getElementById("doneprob1"):this.props.curans-1===2?n=document.getElementById("doneprob3"):this.props.curans-1===3?n=document.getElementById("doneprob4"):this.props.curans-1===4?n=document.getElementById("doneprob5"):this.props.curans-1>=5&&(n=document.getElementById("doneprob6")),n.volume=.1,n.play()}else t="rewardHidden",s="",a=""}else if("test"===this.props.curmode&&this.props.testnum%this.props.pnum===0){var i;if(t="rewardHidden",s="",a="",this.props.curans-1===this.props.order)this.props.curans-1===1?i=document.getElementById("doneprob1"):this.props.curans-1===2?i=document.getElementById("doneprob3"):this.props.curans-1===3?i=document.getElementById("doneprob4"):this.props.curans-1===4?i=document.getElementById("doneprob5"):this.props.curans-1>=5&&(i=document.getElementById("doneprob6")),i.volume=.1,i.play()}return localStorage.setItem(this.props.abbrev,JSON.stringify(e)),E()("#progressbar").animate({width:"".concat(e.score/this.state.pointTotal*100,"%")}),d.a.createElement(d.a.Fragment,null,d.a.createElement("span",{className:"learn"===this.props.curmode?"rewardLearn ".concat(t):"rewardTest ".concat(t)},"".concat(s).concat(a)))}}]),e}(u.Component),S=function(t){function e(){var t;return Object(b.a)(this,e),(t=Object(f.a)(this,Object(k.a)(e).call(this))).state={},t}return Object(v.a)(e,t),Object(g.a)(e,[{key:"componentDidMount",value:function(){E()("#steptext".concat(this.props.order)).html(this.props.text)}},{key:"render",value:function(){var t,e,s,a,o,r,n;return"learn"===this.props.curmode?(o="\u2191",r="\u21ba",this.props.order<this.props.curbut?(t={pointerEvents:"none",backgroundColor:"white",color:"black"},e={backgroundColor:this.props.primcolor}):this.props.order===this.props.curbut?(t={pointerEvents:"all",backgroundColor:this.props.discolor,color:"gray"},e={backgroundColor:this.props.dislabel},a={filter:"blur(3px)"}):(t={pointerEvents:"none",backgroundColor:this.props.discolor,color:"gray"},e={backgroundColor:this.props.dislabel},a={filter:"blur(3px)"}),s=n=this.props.order===this.props.curbut-1&&this.props.curbut>1?{visibility:"visible",cursor:"pointer",pointerEvents:"all"}:{visibility:"hidden",cursor:"none",pointerEvents:"none"}):(s={visibility:"visible",cursor:"none",pointerEvents:"none"},n={visibility:"hidden",cursor:"none",pointerEvents:"none"},this.props.order>this.props.curmark?(t={pointerEvents:"none",backgroundColor:this.props.discolor,color:"gray"},e={backgroundColor:this.props.dislabel},a={filter:"blur(3px)"},o=""):this.props.order===this.props.curmark?(t={pointerEvents:"auto",backgroundColor:"white",color:"black"},e={backgroundColor:this.props.primcolor},o="\u25ef"):(t={pointerEvents:"none",backgroundColor:"white"},e={backgroundColor:this.props.primcolor},o="\u2714\ufe0f")),d.a.createElement("div",{className:"uk-card uk-card-default uk-card-body uk-card-small uk-width-1-1@m ".concat(this.props.margbot),id:"card".concat(this.props.order),onClick:this.props.handler,style:t},d.a.createElement("div",null,d.a.createElement("span",{className:"arrow",onClick:this.props.upone,style:s},o),d.a.createElement("span",{className:"reparrow",onClick:this.props.repstep,style:n},r),d.a.createElement("span",{className:"uk-label",style:e},this.props.label),d.a.createElement(O,{points:"test"===this.props.curmode?this.props.testpointsper:this.props.learnpointsper,curmode:this.props.curmode,order:this.props.order,curbut:this.props.curbut,curans:this.props.curans,clickData:this.props.clickData,abbrev:this.props.abbrev,testnum:this.props.testnum,pnum:this.props.pnum,probdata:this.props.probdata,pointtotal:this.props.probdata[0].fields.pointTotal}),d.a.createElement("p",{className:"step-text",id:"steptext".concat(this.props.order),style:a},this.props.text),this.props.multbuts))}}]),e}(u.Component),N=function(t){function e(){var t;return Object(b.a)(this,e),(t=Object(f.a)(this,Object(k.a)(e).call(this))).state={response:!1,curSimScore:null},t.compareAnswers=t.compareAnswers.bind(Object(y.a)(t)),t.clearAnswer=t.clearAnswer.bind(Object(y.a)(t)),t}return Object(v.a)(e,t),Object(g.a)(e,[{key:"compareAnswers",value:function(){var t,e=E()("#reflectQuestion").val(),s=this.props.suganswer;E()("#reflectQuestion").val("");var a=new XMLHttpRequest,o="https://api.dandelion.eu/datatxt/sim/v1/?text1=".concat(e,"&text2=").concat(s,"&token=a4afc7d8c8c74f53820d3691f00c731d");a.open("GET",o),a.send(),a.onreadystatechange=function(o){var r=a.responseText.indexOf("similarity")+12,n=a.responseText.indexOf('"lang":'),i=a.responseText.slice(r,n-1);t=(100*Number(i)).toFixed(2),isNaN(t)&&(t=0),E()("#modal-score").text("Score: ".concat(t," points out of 100.")),E()("#stu-answer").html("<strong>Your answer</strong><br /><i>".concat(e,"</i>")),E()("#sug-answer").html("<strong>Suggested answer</strong><br />".concat(s))},this.setState({response:!0})}},{key:"clearAnswer",value:function(){E()("#reflectQuestion").val(""),this.setState({response:!1})}},{key:"render",value:function(){return d.a.createElement("div",null,d.a.createElement("textarea",{id:"reflectQuestion",placeholder:this.props.reflectQ,className:"uk-width-1-1@m",style:{width:"81%",marginBottom:10,resize:"none",fontSize:"0.8em",minHeight:"8vh",border:"none",boxSizing:"border-box",padding:"5px 5px 5px 10px",outline:"none"}}),d.a.createElement("button",{onClick:this.compareAnswers,className:"uk-button uk-button-default uk-button-small","uk-toggle":"target: #modal-reflect",style:{minHeight:"8vh",float:"right",borderTopRightRadius:5,borderBottomRightRadius:5,boxShadow:"0 0 3px #aaa",border:"none",width:"15%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"white",fontSize:"1.2vmax"}},"check"),d.a.createElement("div",{id:"modal-reflect","uk-modal":"true"},d.a.createElement("div",{className:"uk-modal-dialog uk-modal-body uk-overflow-auto"},d.a.createElement("button",{className:"uk-modal-close-default",type:"button","uk-close":"true",onClick:this.clearAnswer}),d.a.createElement("h4",{className:"uk-modal-title",id:"modal-score"}," "),d.a.createElement("p",{className:"uk-text-justify",id:"stu-answer"}),d.a.createElement("p",{className:"uk-text-justify",id:"sug-answer"}))))}}]),e}(u.Component),T=null,x=null,M=null,A=100,C=function(t){function e(){var t;return Object(b.a)(this,e),(t=Object(f.a)(this,Object(k.a)(e).call(this))).state={SOCKETON:!1,numusers:0,is_teacher:!1,users:{},nnames:{},curAssigned:!1,teacher_exists:!1,talkVol:0},t.handleAnswers=t.handleAnswers.bind(Object(y.a)(t)),t.clearAnswer=t.clearAnswer.bind(Object(y.a)(t)),t.startSocket=t.startSocket.bind(Object(y.a)(t)),t.receiveUser=t.receiveUser.bind(Object(y.a)(t)),t.endUser=t.endUser.bind(Object(y.a)(t)),t.sendAssign=t.sendAssign.bind(Object(y.a)(t)),t.receiveAssign=t.receiveAssign.bind(Object(y.a)(t)),t.handleMathAnswer=t.handleMathAnswer.bind(Object(y.a)(t)),t.setTalkVol=t.setTalkVol.bind(Object(y.a)(t)),t.handleChoiceClick=t.handleChoiceClick.bind(Object(y.a)(t)),t}return Object(v.a)(e,t),Object(g.a)(e,[{key:"handleMathAnswer",value:function(t){window.speechSynthesis.cancel(),this.state.SOCKETON&&!this.state.is_teacher&&(-1===E()(".choice".concat(t)).attr("class").indexOf("hvr-bob")?(E()(".choice".concat(t)).attr("class","choice".concat(t," choice-button hvr-bob")),E()(".choice-button").not(".choice".concat(t)).each(function(t){E()(this).removeClass("hvr-bob")})):(E()(".choice".concat(t)).attr("class","choice".concat(t," choice-button")),t=null)),this.handleAnswers(t)}},{key:"handleChoiceClick",value:function(t){E()(t.target).hasClass("choiceA")?this.handleMathAnswer("A"):E()(t.target).hasClass("choiceB")?this.handleMathAnswer("B"):E()(t.target).hasClass("choiceC")?this.handleMathAnswer("C"):E()(t.target).hasClass("choiceD")&&this.handleMathAnswer("D")}},{key:"componentDidMount",value:function(){window.addEventListener("touchmove",function(){}),window.addEventListener("beforeunload",function(){T.send(JSON.stringify({action:"userend",userID:x}))}),window.addEventListener("click",this.handleChoiceClick),window.speechSynthesis.onvoiceschanged=function(){n=window.speechSynthesis.getVoices()}}},{key:"componentWillUnmount",value:function(){clearInterval(a),window.removeEventListener("click",this.handleChoiceClick)}},{key:"handleMessage",value:function(t){if(this.state.SOCKETON){var e=JSON.parse(t.data);"submit"===e.action?this.handleReceiveAnswers(e.ans,e.user,e.tAns):"usercheck"===e.action?this.receiveUser(e.userID,e.nname,e.tExist):"userend"===e.action?this.endUser(e.userID):"assign"===e.action?this.receiveAssign(e.userID):"unassign"===e.action?this.receiveUnassign():"emit-state"===e.action&&this.props.updatestate(e.tnum,e.cans)}}},{key:"startSocket",value:function(t){var e=E()("#socketID").val();!0===E()("#teacherchck").prop("checked")&&(e+="T$");var s=9999999999999;this.setState({teacher_exists:s}),null!==e.match(/[A-Za-z0-9_-]+[T$]$/g)?(s=(new Date).getTime(),e=e.slice(0,-2),E()("#socketID").val(e),this.setState({is_teacher:!0,teacher_exists:s}),setTimeout(function(){this.state.is_teacher?r=setInterval(function(){T.send(JSON.stringify({action:"emit-state",tnum:this.props.testnum,cans:this.props.curans}))}.bind(this),1580):clearInterval(r)}.bind(this),3e3)):E()("#updateTest").css({"pointer-events":"none"}),""!==e&&null===e.match(/[^A-Za-z0-9_-]+/g)&&(""===(M=E()("#nickname").val())&&(M="*"),(T=new WebSocket("wss://connect.websocket.in/addlikefracs?room_id="+e)).addEventListener("message",this.handleMessage.bind(this)),this.setState({SOCKETON:!0}),window.UIkit.modal(document.getElementById("modal-example")).hide(),x=String(Math.floor(1e6*Math.random())),E()("#goToLearn").css({"pointer-events":"none"}),a=setInterval(function(){T.send(JSON.stringify({action:"usercheck",userID:x,nname:M,tExist:s}))},2e3))}},{key:"receiveUser",value:function(t,e,s){for(var a in this.state.users)if(this.state.users[a]===t)return;var o=this.state.users;o[String(this.state.numusers+1)]=t;var r=this.state.nnames;r[String(this.state.numusers+1)]=e,this.setState({numusers:this.state.numusers+1,users:o,nnames:r}),s<this.state.teacher_exists&&this.setState({is_teacher:!1,teacher_exists:!0})}},{key:"endUser",value:function(t){this.state.curAssigned===t&&T.send(JSON.stringify({action:"unassign"})),E()("#"+t).css({"pointer-events":"none",visibility:"hidden"}),E()("#"+t).prop("disabled",!0)}},{key:"handleAnswers",value:function(t){var e;E()(".choice-button").removeClass("wrong-answer"),e=this.props.testnum%this.props.pnum===0?this.props.pnum:this.props.testnum%this.props.pnum;var s=this.props.probdata[this.props.curans-1].fields["testans".concat(e)];this.state.SOCKETON&&T.send(JSON.stringify({action:"submit",ans:t,user:x,tAns:this.state.is_teacher})),t===s&&(!this.state.SOCKETON||this.state.SOCKETON&&this.state.is_teacher)?this.props.correctans(!(this.props.curans<this.props.steps)):t!==s&&(!this.state.SOCKETON||this.state.SOCKETON&&this.state.is_teacher)&&(E()("#".concat(this.props.testcode).concat(this.props.curans-1).concat({A:0,B:1,C:2,D:3}[t])).addClass("wrong-answer"),this.props.incorrectans())}},{key:"handleReceiveAnswers",value:function(t,e,s){if(this.state.is_teacher){t?E()("#".concat(e)).css({"background-color":{a:"rgb(150, 226, 252)",b:"rgb(178, 178, 204)",c:"rgb(153, 229, 153)",d:"rgb(228, 203, 228)"}[t.toLowerCase()]}):E()("#".concat(e)).css({"background-color":"#ffffff"})}else if(s){var a;a=this.props.testnum%this.props.pnum===0?this.props.pnum:this.props.testnum%this.props.pnum,t===this.props.probdata[this.props.curans-1].fields["testans".concat(a)]&&(this.props.correctans(!(this.props.curans<this.props.probdata.length-2)),E()(".choice-button").removeClass("hvr-bob"))}}},{key:"clearAnswer",value:function(){this.editor.clear(),E()("#answerInput").css({color:"#fafafa"}),setTimeout(function(){E()("#answerInput").css({color:"black"})},1e3)}},{key:"sendAssign",value:function(t){var e="teacher"===this.state.curAssigned;return"ban-button"===t.currentTarget.id&&this.state.is_teacher&&!e?(E()("#ban-button").css({"background-color":"rgba(255, 0, 0, 0.8)"}),E()(".userbutton").css({"background-color":"#ffffff"}),this.setState({curAssigned:"teacher"}),void(o=setInterval(function(){T.send(JSON.stringify({action:"assign",userID:"teacher"}))},2e3))):"ban-button"===t.currentTarget.id&&this.state.is_teacher&&e?(E()("#ban-button").css({"background-color":"lightblue"}),T.send(JSON.stringify({action:"unassign"})),this.setState({curAssigned:!1}),void clearInterval(o)):void("rgb(144, 238, 144)"!==E()("#"+t.currentTarget.id).css("background-color")?(clearInterval(o),E()("#ban-button").css({"background-color":"lightblue"}),E()("#"+t.currentTarget.id).css({"background-color":"rgb(235, 233, 141)"}),E()(".userbutton").not("#"+t.currentTarget.id).css({"background-color":"#ffffff"}),T.send(JSON.stringify({action:"assign",userID:t.currentTarget.id})),this.setState({curAssigned:t.currentTarget.id})):(E()("#ban-button").css({"background-color":"lightblue"}),E()("#"+t.currentTarget.id).css({"background-color":"#ffffff"}),T.send(JSON.stringify({action:"unassign"})),this.setState({curAssigned:!1})))}},{key:"receiveAssign",value:function(t){x===t&&!1===this.state.curAssigned?(E()("#coverCanvas").css({display:"none"}),E()("#assignModal").trigger("click"),this.setState({curAssigned:!0})):x===t&&!0===this.state.curAssigned?this.setState({curAssigned:!1}):x!==t&&(E()("#coverCanvas").css({display:"inline"}),this.setState({curAssigned:!1}))}},{key:"receiveUnassign",value:function(){E()("#coverCanvas").css({display:"none"}),this.setState({curAssigned:!1})}},{key:"setTalkVol",value:function(){1===this.state.talkVol?(window.speechSynthesis.cancel(),this.setState({talkVol:0})):this.setState({talkVol:1})}},{key:"render",value:function(){var t,e=[];t=this.state.SOCKETON?{backgroundColor:"#00ff00"}:{backgroundColor:"#D3D3D3"},this.state.is_teacher&&(t={backgroundColor:"#ff00ff"});for(var s=Object.keys(this.state.users),a=Object.keys(this.state.nnames),o=0;o<s.length;o++){var r=35*(o+1)+5;e.push(d.a.createElement("button",{className:"userbutton uk-animation-slide-left",key:o,id:this.state.users[s[o]],"uk-tooltip":"title: ".concat(this.state.nnames[a[o]],"; pos: right"),style:{top:r}},d.a.createElement("span",{"uk-icon":"happy"})))}if(this.props.curans<=this.props.probdata.length-2&&!this.state.SOCKETON&&1===this.state.talkVol&&this.props.curans!==A){var i=window.speechSynthesis,c=new SpeechSynthesisUtterance(this.props.probdata[this.props.curans-1].fields["".concat(this.props.testcode,"readable")]);c.volume=this.state.talkVol,setTimeout(function(){c.voice=n[5],i.speak(c)},1e3),A=this.props.curans}var l,p=0;"_square"===this.props.mediaDimTag&&(p=1),l=this.props.testnum%this.props.pnum===1||1===this.props.pnum?"testimg":this.props.testnum%this.props.pnum===0?"testimg".concat(this.props.pnum):"testimg".concat(this.props.testnum%this.props.pnum);var u=this.props.curans-1;this.props.curans>=this.props.steps&&(u=this.props.steps-1);var h=this.props.probdata[u].fields[l][p].url;return d.a.createElement("div",{id:"interactive"},d.a.createElement("img",{id:"curTestImg",src:h,alt:"",style:{height:"90%"}}),d.a.createElement("img",{onClick:this.setTalkVol,id:"talkicon",src:"audio_icon.svg",alt:"",style:{opacity:1.5*(1-this.state.talkVol)/1.5+.2}}),"test"===this.props.curmode?void 0:null,d.a.createElement("button",{id:"openModal",type:"button","uk-toggle":"target: #modal-example",style:t},d.a.createElement("span",{"uk-icon":"more"})),d.a.createElement("button",{id:"assignModal",type:"button","uk-toggle":"target: #modal-assign",style:{display:"none"}}),d.a.createElement("div",{id:"modal-example","uk-modal":"true"},d.a.createElement("div",{className:"uk-modal-dialog uk-modal-body uk-overflow-auto"},d.a.createElement("button",{className:"uk-modal-close-default",type:"button","uk-close":"true"}),d.a.createElement("h4",{className:"uk-modal-title"},"Guided Practice"),d.a.createElement("p",{className:"uk-text-justify"},"Enter a Room ID (e.g., mrscala_203). Then click to join an interactive practice session. If you are leading, share the ID for others to join. If you are joining, enter the ID shared with you and enter a name if you want to."),d.a.createElement("p",{className:"uk-text-right"},d.a.createElement("input",{id:"socketID",placeholder:"Room ID"})),d.a.createElement("p",{className:"uk-text-right"},d.a.createElement("input",{id:"nickname",placeholder:"Name | Nickname",maxLength:"10"})),d.a.createElement("p",{className:"uk-text-justify"},"Entering numbers, letters, hyphens, and underscore characters is okay, up to a maximum of 20 characters."),d.a.createElement("p",{className:"uk-text-right"},d.a.createElement("button",{className:"uk-button uk-button-primary",type:"button",onClick:this.startSocket},"Join Session"),d.a.createElement("br",null),d.a.createElement("input",{type:"checkbox",className:"uk-checkbox",name:"teachercheck",id:"teacherchck"}),d.a.createElement("label",{htmlFor:"teachercheck"},"\xa0\xa0Teacher")))),this.state.is_teacher?d.a.createElement("div",{id:"userSideBar",style:{position:"fixed",top:0,left:0,width:150,height:"100vh",backgroundColor:"navy"}},this.state.is_teacher?e:null,this.state.is_teacher?d.a.createElement("button",{className:"banbutton",id:"ban-button",style:{top:0,left:0},onClick:this.sendAssign},d.a.createElement("span",{"uk-icon":"ban"})):null):null,d.a.createElement("div",{id:"coverCanvas"}))}}]),e}(u.Component),B=function(t){function e(){var t;return Object(b.a)(this,e),(t=Object(f.a)(this,Object(k.a)(e).call(this))).state={currentButton:1,mode:"learn",currentAnswerMark:1,mediaDimTag:"",testKey:1,audioVol:1,userTested:!1,PNUM:null,testPointsPer:50,learnPointsPer:100,lastTestPointsPer:null},t.childClick=t.childClick.bind(Object(y.a)(t)),t.startOver=t.startOver.bind(Object(y.a)(t)),t.reset=t.reset.bind(Object(y.a)(t)),t.upOne=t.upOne.bind(Object(y.a)(t)),t.testMode=t.testMode.bind(Object(y.a)(t)),t.learnMode=t.learnMode.bind(Object(y.a)(t)),t.correctAnswer=t.correctAnswer.bind(Object(y.a)(t)),t.updateTest=t.updateTest.bind(Object(y.a)(t)),t.setAudio=t.setAudio.bind(Object(y.a)(t)),t.repeatStep=t.repeatStep.bind(Object(y.a)(t)),t.userTested=t.userTested.bind(Object(y.a)(t)),t.updateState=t.updateState.bind(Object(y.a)(t)),t.updateMedia=t.updateMedia.bind(Object(y.a)(t)),t.incorrectAnswer=t.incorrectAnswer.bind(Object(y.a)(t)),t.checkScore=t.checkScore.bind(Object(y.a)(t)),t}return Object(v.a)(e,t),Object(g.a)(e,[{key:"userTested",value:function(t){t&&this.setState({userTested:!0})}},{key:"updateMedia",value:function(){var t,e=E()("#media-container").width(),s=E()("#media-container").height();t=e/s<=1.2?"_square":"",this.setState({mediaDimTag:t,PNUM:this.props.pnum,testPointsPer:this.props.clickData.lastTestPointsPer}),e/s>1.72?this.setState({mediaDims:{height:"65vh"}}):this.setState({mediaDims:{height:"54vh"}})}},{key:"componentDidMount",value:function(){this.updateMedia(),E()("#media-container").width()/E()("#media-container").height()>1.72&&this.setState({mediaDims:{height:"65vh"}}),window.addEventListener("resize",this.updateMedia.bind(this)),setTimeout(function(){window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub])},50);var t=this.props.probdata[0].fields.pointTotal;l=JSON.parse(localStorage.getItem(this.props.audio_abbrev.slice(0,this.props.audio_abbrev.indexOf("_")))).banked_score,c=JSON.parse(localStorage.getItem(this.props.audio_abbrev.slice(0,this.props.audio_abbrev.indexOf("_")))).score,i=l<.33*t?"zero_stars.svg":l>=.33*t&&l<.66*t?"one_star.svg":l>=.66*t&&l<.81*t?"two_stars.svg":"three_stars.svg",E()("#banktext").text(String(l))}},{key:"childClick",value:function(){if("test"!==this.state.mode){this.setState({currentButton:this.state.currentButton+1},function(){var t=document.getElementById("steps-container"),e=document.getElementById("steps-container").offsetTop,s=document.getElementById("card".concat(this.state.currentButton-1)).offsetTop;setTimeout(function(){t.scroll({top:s-e-2,behavior:"smooth"})},800)});for(var t=document.getElementsByTagName("audio"),e=0;e<t.length;e++)t[e].pause(),t[e].currentTime=0;var s=document.getElementById("".concat(this.props.audio_abbrev).concat(this.state.currentButton));s&&(s.src=this.props.probdata[this.state.currentButton-1].fields.learnaudio[0].url||null,s.volume=this.state.audioVol,setTimeout(function(){s.play()},800))}}},{key:"correctAnswer",value:function(t){this.setState({currentAnswerMark:this.state.currentAnswerMark+1},function(){var e=document.getElementById("steps-container"),s=document.getElementById("steps-container").offsetTop;if(t)setTimeout(function(){e.scroll({top:9999,behavior:"smooth"})},800);else{var a=document.getElementById("card".concat(this.state.currentAnswerMark)).offsetTop;setTimeout(function(){e.scroll({top:a-s-2,behavior:"smooth"})},800)}this.state.currentAnswerMark>this.props.probdata.length-2&&E()(".choice-button").attr("disabled",!0)}),E()(".userbutton").css({"background-color":"#ffffff"});var e,s;this.state.testKey%this.state.PNUM===1||1===this.state.PNUM?(e="test",s=1):this.state.testKey%this.state.PNUM===0?(e="test".concat(this.state.PNUM),s=this.state.PNUM):(e="test".concat(this.state.testKey%this.state.PNUM),s=this.state.testKey%this.state.PNUM);var a=this.props.probdata[this.state.currentAnswerMark-2].fields["testans".concat(s)];if(E()("#".concat(e).concat(this.state.currentAnswerMark-2).concat({A:0,B:1,C:2,D:3}[a])).css("background-color",{A:"rgba(150, 226, 252, 0.5)",B:"rgba(178, 178, 204, 0.5)",C:"rgba(153, 229, 153, 0.5)",D:"rgba(228, 203, 228, 0.5)"}[a]),this.state.testKey%this.state.PNUM!==0){this.setState({testPointsPer:50,lastTestPointsPer:50});var o=this.props.clickData;o.lastTestPointsPer=50,localStorage.setItem(this.props.audio_abbrev.slice(0,this.props.audio_abbrev.indexOf("_")),JSON.stringify(o))}else if(this.state.testKey%this.state.PNUM===0&&this.state.currentAnswerMark>this.props.probdata.length-2){var r,n=this.props.clickData,i=0;E()("#progressbar").animate({width:"0%"},2e3),r=setInterval(function(){i!==n.banked_score?(i=Number(E()("#banktext").text()),i+=1,E()("#banktext").text(String(i))):clearInterval(r)},2),n.banked_score+=n.score,n.score=0,localStorage.setItem(this.props.audio_abbrev.slice(0,this.props.audio_abbrev.indexOf("_")),JSON.stringify(n));var c=document.getElementById("quizshow");c.pause(),c.currentTime=0;var l=document.getElementById("quizshowend");l.volume=.25,l.play()}}},{key:"incorrectAnswer",value:function(){if(this.state.testKey%this.state.PNUM!==0){var t=this.props.clickData;t.lastTestPointsPer=Math.ceil(this.state.testPointsPer/2),localStorage.setItem(this.props.audio_abbrev.slice(0,this.props.audio_abbrev.indexOf("_")),JSON.stringify(t)),this.setState({testPointsPer:Math.ceil(this.state.testPointsPer/2),lastTestPointsPer:Math.ceil(this.state.testPointsPer/2)})}else{var e=this.props.clickData;e.score=e.score/2,localStorage.setItem(this.props.audio_abbrev.slice(0,this.props.audio_abbrev.indexOf("_")),JSON.stringify(e)),E()("#progressbar").animate({width:"".concat(e.score/this.props.probdata[0].fields.pointTotal*100,"%")})}}},{key:"startOver",value:function(){this.setState({currentButton:2},function(){for(var t=document.getElementsByTagName("audio"),e=0;e<t.length;e++)t[e].pause(),t[e].currentTime=0;var s=document.getElementById("".concat(this.props.audio_abbrev).concat(this.state.currentButton-1));s&&(s.src=this.props.probdata[this.state.currentButton-2].fields.learnaudio[0].url||null,s.volume=this.state.audioVol,s.play())}),document.getElementById("steps-container").scroll({top:0,behavior:"smooth"}),E()("#reflectQuestion").val("")}},{key:"reset",value:function(){this.setState({currentButton:1},function(){for(var t=document.getElementsByTagName("audio"),e=0;e<t.length;e++)t[e].pause(),t[e].currentTime=0}),document.getElementById("steps-container").scroll({top:0,behavior:"smooth"}),E()("#reflectQuestion").val("")}},{key:"upOne",value:function(t){for(var e=document.getElementsByTagName("audio"),s=0;s<e.length;s++)e[s].pause(),e[s].currentTime=0;var a=document.getElementById("".concat(this.props.audio_abbrev).concat(this.state.currentButton-2));a&&(a.src=this.props.probdata[this.state.currentButton-3].fields.learnaudio[0].url||null,a.volume=this.state.audioVol,a.play()),t.stopPropagation(),this.setState({currentButton:this.state.currentButton-1},function(){if(this.state.currentButton>1){var t=document.getElementById("steps-container"),e=document.getElementById("steps-container").offsetTop,s=document.getElementById("card".concat(this.state.currentButton-1)).offsetTop;setTimeout(function(){t.scroll({top:s-e,behavior:"smooth"})},100)}})}},{key:"repeatStep",value:function(t){for(var e=document.getElementsByTagName("audio"),s=0;s<e.length;s++)e[s].pause(),e[s].currentTime=0;var a=document.getElementById("".concat(this.props.audio_abbrev).concat(this.state.currentButton-1));a&&(a.src=this.props.probdata[this.state.currentButton-2].fields.learnaudio[0].url||null,a.volume=this.state.audioVol,a.play()),t.stopPropagation()}},{key:"setAudio",value:function(){var t=this.state.audioVol;t=0===t?1:0,this.setState({audioVol:t},function(){var e=document.getElementById("".concat(this.props.audio_abbrev).concat(this.state.currentButton-1));e&&(e.volume=t)})}},{key:"testMode",value:function(){this.setState({currentButton:2,mode:"test",currentAnswerMark:1}),setTimeout(function(){window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub])},50),document.getElementById("steps-container").scroll({top:0,behavior:"smooth"});var t=document.getElementById("".concat(this.props.audio_abbrev).concat(this.state.currentButton-1));t&&(t.pause(),t.currentTime=0)}},{key:"updateTest",value:function(){E()(".choice-button").attr("disabled",!1),E()(".choice-button").css("background-color","initial");var t=this.state.testKey+1;this.setState({currentButton:2,mode:"test",currentAnswerMark:1,testKey:t},function(){var t=document.getElementById("quizshow");this.state.testKey%this.state.PNUM===0?(t.volume=.09,t.play()):(t.pause(),t.currentTime=0)}),setTimeout(function(){window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub])},50),document.getElementById("steps-container").scroll({top:0,behavior:"smooth"})}},{key:"learnMode",value:function(){this.setState({currentButton:1,mode:"learn",currentAnswerMark:1}),setTimeout(function(){window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub])},50),document.getElementById("steps-container").scroll({top:0,behavior:"smooth"})}},{key:"updateState",value:function(t,e){if(this.setState({testKey:t,currentAnswerMark:e,mode:"test"}),setTimeout(function(){window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub])},50),e<=this.state.PNUM){var s=document.getElementById("card".concat(e)).offsetTop,a=document.getElementById("steps-container"),o=document.getElementById("steps-container").offsetTop;setTimeout(function(){a.scroll({top:s-o,behavior:"smooth"})},800)}}},{key:"checkScore",value:function(){l=JSON.parse(localStorage.getItem(this.props.audio_abbrev.slice(0,this.props.audio_abbrev.indexOf("_")))).banked_score,c=JSON.parse(localStorage.getItem(this.props.audio_abbrev.slice(0,this.props.audio_abbrev.indexOf("_")))).score,i=l<.33*this.props.probdata[0].fields.pointTotal?"zero_stars.svg":l>=.33*this.props.probdata[0].fields.pointTotal&&l<.66*this.props.probdata[0].fields.pointTotal?"one_star.svg":l>=.66*this.props.probdata[0].fields.pointTotal&&l<.81*this.props.probdata[0].fields.pointTotal?"two_stars.svg":"three_stars.svg",E()("#showbank").text(String(l)),E()("#showbank2").text(String(l)),E()("#showscore").text(String(c)),E()("#showstars").attr("src",i)}},{key:"render",value:function(){if(!this.props.probdata)return null;var t,e,s,a,o,r,n,c,l,p,u=[],h=[];if(a=this.state.mediaDims,e=this.state.currentButton<=this.props.probdata.length-2?{pointerEvents:"none",backgroundColor:this.props.discolor}:{pointerEvents:"all",backgroundColor:"white"},"learn"===this.state.mode){E()("#media-container").css({background:"radial-gradient(white, #fafafa)"});for(var m=0;m<this.props.probdata.length-2;m++)h.push(d.a.createElement(S,{key:this.props.probdata[m].fields.id,label:this.props.probdata[m].fields.label,text:this.props.probdata[m].fields.text,probdata:this.props.probdata,order:this.props.probdata[m].fields.order,handler:this.childClick,curbut:this.state.currentButton,curmode:this.state.mode,upone:this.upOne,repstep:this.repeatStep,primcolor:this.props.primcolor,seccolor:this.props.seccolor,discolor:this.props.discolor,dislabel:this.props.dislabel,margbot:m===this.props.probdata.length-3?"uk-margin-large-bottom":"uk-margin-small-bottom",clickData:this.props.clickData,abbrev:this.props.audio_abbrev.slice(0,this.props.audio_abbrev.indexOf("_")),learnpointsper:this.state.learnPointsPer}));s=d.a.createElement("span",null,d.a.createElement("button",{onClick:this.startOver,className:"uk-button uk-button-default uk-button-small uk-width-1-3",style:e},"redo"),d.a.createElement("button",{style:{backgroundColor:this.props.seccolor},onClick:this.reset,className:"uk-button uk-button-secondary uk-button-small uk-width-1-3"},"clear"),d.a.createElement("button",{style:{backgroundColor:this.props.primcolor},onClick:this.testMode,className:"uk-button uk-button-primary uk-button-small uk-width-1-3"},"show"));var b,g=0;"_square"===this.state.mediaDimTag&&(g=1),b=1===this.state.currentButton?"sbs_aslf_coverimg".concat(this.state.mediaDimTag,".svg"):this.props.probdata[this.state.currentButton-2].fields.learnimg[g].url,t=d.a.createElement("img",{src:b,alt:""}),n=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?"hidden":"visible",r=d.a.createElement(N,{suganswer:this.props.probdata[this.props.probdata.length-1].fields.text,reflectQ:this.props.probdata[this.props.probdata.length-2].fields.text})}else{E()("#media-container").css({"background-image":"radial-gradient(#e3e3e3 20%, transparent 20%), radial-gradient(#fafafa 20%, transparent 20%)","background-color":"white","background-position":"0 0, 50px 50px","background-size":"10px 10px"}),e=this.state.currentButton<this.props.probdata.length-2?{pointerEvents:"none",backgroundColor:this.props.discolor}:{pointerEvents:"all",backgroundColor:"white"},c=this.state.testKey%this.state.PNUM===1||1===this.state.PNUM?"test":this.state.testKey%this.state.PNUM===0?"test".concat(this.state.PNUM):"test".concat(this.state.testKey%this.state.PNUM),p=0;for(var f=0;f<this.props.probdata.length-2;f++)void 0!==this.props.probdata[f].fields[c]&&(p+=1);s=d.a.createElement("span",null,d.a.createElement("button",{id:"goToLearn",style:{backgroundColor:this.props.seccolor},onClick:this.learnMode,className:"uk-button uk-button-primary uk-button-small uk-width-1-2"},"learn\u2009",d.a.createElement("span",{"uk-icon":"social"})),d.a.createElement("button",{id:"updateTest",style:{backgroundColor:this.props.primcolor},onClick:this.updateTest,className:"uk-button uk-button-secondary uk-button-small uk-width-1-2"},this.state.testKey%this.state.PNUM!==0?"next":"again"));for(var k=0;k<p;k++)u=[],o=this.state.testKey%this.state.PNUM===1||1===this.state.PNUM?this.props.probdata[k].fields[c]:this.state.testKey%this.state.PNUM===0?this.props.probdata[k].fields["test".concat(this.state.PNUM)]:this.props.probdata[k].fields["test".concat(this.state.testKey%this.state.PNUM)],u.push(d.a.createElement("div",{key:"".concat(c).concat(k)},-1!==this.props.probdata[k].fields["".concat(c,"butenabled")].indexOf("A")?d.a.createElement("button",{id:"".concat(c).concat(k,"0"),className:"choice-button choiceA",style:this.props.probdata[k].fields.order>this.state.currentAnswerMark?{display:"none"}:{display:"flex"}},d.a.createElement("span",{style:{color:"#33ccff"}},"\u24b6"),"\xa0\xa0 ",this.props.probdata[k].fields["".concat(c,"choiceA")]):null,-1!==this.props.probdata[k].fields["".concat(c,"butenabled")].indexOf("B")?d.a.createElement("button",{id:"".concat(c).concat(k,"1"),className:"choice-button choiceB",style:this.props.probdata[k].fields.order>this.state.currentAnswerMark?{display:"none"}:{display:"flex"}},d.a.createElement("span",{style:{color:"#8a8ab1"}},"\u24b7"),"\xa0\xa0 ",this.props.probdata[k].fields["".concat(c,"choiceB")]):null,-1!==this.props.probdata[k].fields["".concat(c,"butenabled")].indexOf("C")?d.a.createElement("button",{id:"".concat(c).concat(k,"2"),className:"choice-button choiceC",style:this.props.probdata[k].fields.order>this.state.currentAnswerMark?{display:"none"}:{display:"flex"}},d.a.createElement("span",{style:{color:"#33cc33"}},"\u24b8"),"\xa0\xa0 ",this.props.probdata[k].fields["".concat(c,"choiceC")]):null,-1!==this.props.probdata[k].fields["".concat(c,"butenabled")].indexOf("D")?d.a.createElement("button",{id:"".concat(c).concat(k,"3"),className:"choice-button choiceD",style:this.props.probdata[k].fields.order>this.state.currentAnswerMark?{display:"none"}:{display:"flex"}},d.a.createElement("span",{style:{color:"#cc99cc"}},"\u24b9"),"\xa0\xa0 ",this.props.probdata[k].fields["".concat(c,"choiceD")]):null)),h.push(d.a.createElement(S,{key:this.props.probdata[k].fields.id,label:this.props.probdata[k].fields.testLabel,text:o,order:this.props.probdata[k].fields.order,handler:this.childClick,curbut:this.state.currentButton,curmode:this.state.mode,curmark:this.state.currentAnswerMark,primcolor:this.props.primcolor,seccolor:this.props.seccolor,discolor:this.props.discolor,dislabel:this.props.dislabel,margbot:"uk-margin-small-bottom",multbuts:u,probdata:this.props.probdata,curans:this.state.currentAnswerMark,clickData:this.props.clickData,abbrev:this.props.audio_abbrev.slice(0,this.props.audio_abbrev.indexOf("_")),testnum:this.state.testKey,testpointsper:this.state.testPointsPer,pnum:this.state.PNUM}));t=d.a.createElement(C,{testnum:this.state.testKey,curbut:this.state.currentButton,correctans:this.correctAnswer,curans:this.state.currentAnswerMark,tested:this.userTested,pnum:this.state.PNUM,updatestate:this.updateState,probdata:this.props.probdata,mediaDimTag:this.state.mediaDimTag,curmode:this.state.mode,testcode:c,steps:p,incorrectans:this.incorrectAnswer}),r=null,n="hidden",l=1===this.state.PNUM?this.state.currentAnswerMark:"test"===c?"1":c.slice(4),1===this.state.PNUM&&this.state.currentAnswerMark>this.props.probdata.length-2&&(l=this.props.probdata.length-2)}return d.a.createElement("div",null,d.a.createElement("div",{className:"meter animate"},d.a.createElement("span",{id:"progressbar"},d.a.createElement("span",null))),d.a.createElement("button",{id:"bankModal",onClick:this.checkScore,type:"button","uk-toggle":"target: #modal-score"},d.a.createElement("img",{src:"star_icon.svg",alt:"",style:{height:"90%",marginRight:8,verticalAlign:-1.5,boxShadow:"none"}}),d.a.createElement("span",{id:"banktext",style:{verticalAlign:-.75}})),d.a.createElement("div",{id:"media-container",className:"uk-container uk-cover-container uk-width-1-2@m uk-border-rounded",style:a},t,d.a.createElement("img",{onClick:this.setAudio,id:"soundicon",src:"audio_icon.svg",alt:"",style:{opacity:1.5*(1-this.state.audioVol)/1.5+.2,visibility:n}}),"test"===this.state.mode?d.a.createElement("div",{id:"testNumber"},l):null),d.a.createElement("div",{id:"steps-container",className:"uk-container uk-width-1-2@m"},h,r,s),d.a.createElement("div",{id:"modal-score","uk-modal":"true"},d.a.createElement("div",{className:"uk-modal-dialog uk-modal-body uk-overflow-auto"},d.a.createElement("button",{className:"uk-modal-close-default",type:"button","uk-close":"true"}),d.a.createElement("h4",{className:"uk-modal-title"},"Score 'n' Stuff"),d.a.createElement("div",{className:"uk-child-width-1-2@s uk-grid-collapse uk-text-center","uk-grid":"true"},d.a.createElement("div",{className:"uk-tile uk-tile-secondary"},d.a.createElement("h3",{className:"uk-card-title"},"Personal Best"),d.a.createElement("img",{id:"showstars",src:i,alt:""}),d.a.createElement("p",{id:"showbank2"})),d.a.createElement("div",{className:"uk-tile uk-tile-primary"},d.a.createElement("h3",{className:"uk-card-title"},"Reset"),d.a.createElement("button",{onClick:function(){window.confirm("Reset score?")&&(window.localStorage.removeItem("aslf"),window.location.reload())},className:"uk-button uk-button-danger"},"reset"))),d.a.createElement("p",{className:"uk-text-justify"},"So far, you have earned ",d.a.createElement("span",{id:"showscore"})," points. You can bank all of these points on the final quiz if you make no errors. You have ",d.a.createElement("span",{id:"showbank"})," points in the bank. Press Reset to clear your score and go for a new personal best!"))))}}]),e}(u.Component),I=s(10),_=s.n(I),P=null,j=null,D=function(t){function e(){var t;return Object(b.a)(this,e),(t=Object(f.a)(this,Object(k.a)(e).call(this))).state={data:null,PNUM:null},t}return Object(v.a)(e,t),Object(g.a)(e,[{key:"componentDidMount",value:function(){var t=this;if(fetch("https://api.airtable.com/v0/appbJvIOkBMSrEz8z/Adding%20Like%20Fractions?api_key=keyuFtFTBZMHrzjOn").then(function(t){return t.json()}).then(function(e){P=e.records.sort(function(t,e){return t.fields.order-e.fields.order}),j=0;for(var s=0;s<Object.keys(P[0].fields).length;s++)Object.keys(P[0].fields)[s].match(/^test\d*$/)&&(j+=1);t.setState({data:P,PNUM:j})}),window.onbeforeunload=function(){window.speechSynthesis.cancel()},_.a.polyfill(),null===localStorage.getItem("aslf")){localStorage.setItem("aslf",JSON.stringify({score:0,banked_score:0,lastTestPointsPer:50,learn:{step1:!1,step2:!1,step3:!1,step4:!1,step5:!1,step6:!1,step7:!1,step8:!1,step9:!1,step10:!1},test1:{step1:!1,step2:!1,step3:!1,step4:!1,step5:!1,step6:!1,step7:!1,step8:!1,step9:!1,step10:!1},test2:{step1:!1,step2:!1,step3:!1,step4:!1,step5:!1,step6:!1,step7:!1,step8:!1,step9:!1,step10:!1},test3:{step1:!1,step2:!1,step3:!1,step4:!1,step5:!1,step6:!1,step7:!1,step8:!1,step9:!1,step10:!1},test4:{step1:!1,step2:!1,step3:!1,step4:!1,step5:!1,step6:!1,step7:!1,step8:!1,step9:!1,step10:!1},test5:{step1:!1,step2:!1,step3:!1,step4:!1,step5:!1,step6:!1,step7:!1,step8:!1,step9:!1,step10:!1},test6:{step1:!1,step2:!1,step3:!1,step4:!1,step5:!1,step6:!1,step7:!1,step8:!1,step9:!1,step10:!1},test7:{step1:!1,step2:!1,step3:!1,step4:!1,step5:!1,step6:!1,step7:!1,step8:!1,step9:!1,step10:!1},test8:{step1:!1,step2:!1,step3:!1,step4:!1,step5:!1,step6:!1,step7:!1,step8:!1,step9:!1,step10:!1},test9:{step1:!1,step2:!1,step3:!1,step4:!1,step5:!1,step6:!1,step7:!1,step8:!1,step9:!1,step10:!1}}))}p=JSON.parse(localStorage.getItem("aslf"))}},{key:"render",value:function(){if(!P&&!j)return null;var t;return"images-interactive"===this.props.media&&(t=d.a.createElement(B,{primcolor:"#4499cc",seccolor:"#557722",discolor:"#D3D3D3",dislabel:"#aaccdd",suffix:"aslf",probdata:this.state.data,pnum:this.state.PNUM,audio_abbrev:"aslf_narration",clickData:p})),d.a.createElement("div",null,t)}}]),e}(u.Component),U=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function J(t,e){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var s=t.installing;null!=s&&(s.onstatechange=function(){"installed"===s.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}}).catch(function(t){console.error("Error during service worker registration:",t)})}m.a.render(d.a.createElement(D,{media:"images-interactive"}),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/scalamath/adding_like_fractions",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/scalamath/adding_like_fractions","/service-worker.js");U?(function(t,e){fetch(t).then(function(s){var a=s.headers.get("content-type");404===s.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):J(t,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,t),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):J(e,t)})}}()}},[[11,1,2]]]);
//# sourceMappingURL=main.dcd23c4d.chunk.js.map