<!DOCTYPE html>
<html>
<head>
<meta charset = 'utf-8'>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta property="og:image" content='https://guzintamath.com/images/transformsgame.png'>
<link rel="icon" href="https://guzintamath.com/images/guzintafish128.png">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.min.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.js'></script>
<title>Transforms Game</title>
</head>

<style>
body {
   text-align:center;
   margin:0 auto;
   width:1000px;
   height:95vh;
}
#wrapper {
   position:relative;
   width:950px;
   height:575px;
   margin:120px auto 0 50px;
   }
#transform_frame {
  position:absolute;
  top:0;
  left:0;
  width:750px;
  height:400px;
  overflow:hidden;
  border:7px solid #b1a87a;
  background:-moz-radial-gradient(50% 50%, circle farthest-corner,
             rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0.5) 4.87%, rgba(245, 245, 220, 1) 99.44%);
  background:-webkit-radial-gradient(50% 50%, circle farthest-corner, rgba(255, 255, 255, 0.5) 0%,
             rgba(255, 255, 255, 0.5) 4.87%, rgba(245, 245, 220, 1) 99.44%);
  background:-webkit-gradient(radial,50% 50% ,0 , 50% 50%, 300.52 ,color-stop(0,rgba(255, 255, 255, 0.5) ),
             color-stop(0.0487,rgba(255, 255, 255, 0.5) ),color-stop(0.9944,rgba(245, 245, 220, 1) ));
  background:-o-radial-gradient(50% 50%, circle farthest-corner, rgba(255, 255, 255, 0.5) 0%,
             rgba(255, 255, 255, 0.5) 4.87%, rgba(245, 245, 220, 1) 99.44%);
  background:-ms-radial-gradient(50% 50%, circle farthest-corner, rgba(255, 255, 255, 0.5) 0%,
             rgba(255, 255, 255, 0.5) 4.87%, rgba(245, 245, 220, 1) 99.44%);
  -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Stlye=2);"
  background:radial-gradient(50% 50%, circle farthest-corner, rgba(255, 255, 255, 0.5) 0%,
             rgba(255, 255, 255, 0.5) 4.87%, rgba(245, 245, 220, 1) 99.44%);
  border-radius:8px;
  -moz-border-radius:8px;
  -webkit-border-radius:8px;
  filter:progid:DXImageTransform.Microsoft.Alpha(Stlye=2);
}
#shapes_frame {
   position:absolute;
   top:0;
   left:770px;
   width:150px;
   height:568px;
   border:7px solid #b1a87a;
   border-radius:8px;
   background-color:black;
   overflow-y:scroll;
   overflow-x:hidden;
}
#shapes_frame::-webkit-scrollbar {
    display: none;
}
.shape-button {
   text-align:center;
   width:144px;
   height:89px;
   background-color:black;
   margin-bottom:5.5px;
   cursor:pointer;
}
.shape-button:hover {
   background-color:black;
}
#control-box {
   display:inline-block;
   position:absolute;
   top:420px;
   left:0;
   width:750px;
   height:150px;
   border:7px solid #b1a87a;
   border-radius:8px;
   background-color:white;
   overflow:hidden;
}
#demo-box, #player1 {
   display:inline:block;
   width:75px;
   height:75px;
   border:2px solid rgb(100, 211, 254);
   border-radius:8px;
   background-color:white;
   cursor:pointer;
   display:flex;
   align-items:center;
   justify-content:center;
   opacity:0.5;
   font-family:sans-serif;
   font-size:24px;
   font-variant:small-caps;
   font-weight:700;
   color:teal;
}
#grid-box, #challenge {
   display:inline:block;
   position:absolute;
   width:60px;
   height:60px;
   border:2px solid rgb(100, 211, 254);
   border-radius:8px;
   background-color:white;
   cursor:pointer;
   display:flex;
   align-items:center;
   justify-content:center;
   font-family:sans-serif;
   font-size:24px;
   font-variant:small-caps;
   font-weight:700;
   color:teal;
}
#challenge {
   top:5px;
}
#grid-box {
   top:80px;
   background-image:url(grid_icon.svg);
}
#grid-box:hover, #challenge:hover, #demo-box:hover, #player1:hover, #closeIntro:hover {
   box-shadow:0 0 6px #22C7FA;
}
#player1, #score {
   position:fixed;
   top:-5px;
   width:150px;
   height:50px;
   font-size:20px;
   color:white;
   background:#08300D;
}
#score {
   display:flex;
   align-items:center;
   justify-content:center;
   position:fixed;
   display:none;
   font-family:sans-serif;
   font-size:30px;
   border:5px ridge rgb(100, 211, 254);
}
.transform-box {
   position:absolute;
   display:inline-flex;
   align-items:center;
   justify-content:center;
   width:250px;
   height:75px;
   background-color:black;
   box-sizing:border-box;
   padding:5px;
   color:white;
   font-family:sans-serif;
   font-size:20px;
   font-variant:small-caps;
   pointer-events:none;
   opacity:0.5;
}
.transform-input {
   width:67.5px;
   height:45px;
   font-family:sans-serif;
   font-size:20px;
   outline:none;
   padding:2.5px;
   text-align:center;
   border-radius:5px;
   border:1px solid #cccccc;
}
.transform-input:hover {
   border:1px solid #1eb4e1;
   box-shadow:0 0 6px rgba(0,0,0,0.16);
}
#sheath {
   position:fixed;
   top:0;
   left:0;
   width:100%;
   height:100%;
   background:rgba(0,0,0,0.25);
   z-index:999;
   display:none;
}
#startGame {
   position:fixed;
   display:none;
   width:350px;
   height:300px;
   background-color:rgba(0,0,0,0.9);
   color:white;
   font-family:sans-serif;
   font-size:18px;
   border-radius:8px;
   z-index:9999;
   box-sizing:border-box;
   padding:30px;
   text-align:justify;
   box-shadow:0 0 5px #000;
}
#chatWindow {
   position:fixed;
   left:0;
   top:0;
   width:200px;
   height:calc(100vh - 100px);
   background-color:#fafafa;
   font-family:sans-serif;
   font-size:16px;
   border-top:none;
   border-bottom:none;
   border-left:none;
   border-right:2px dashed gray;
   outline:none;
   box-sizing:border-box;
   padding:10px;
   overflow:hidden;
   text-align:left;
}
#submit {
   position:fixed;
   bottom:10px;
   left:5px;
   width:185px;
   height:75px;
   font-family:sans-serif;
   font-size:20px;
   resize:none;
}
.message-p {
   box-sizing:border-box;
   padding:5px;
}
</style>

<body>
<div id='score'>
<span id='scoreNum' style='position:absolute;width:100px;bottom:0;left:25px;text-align:center;'>0</span>
</div>
<canvas id='sheath'></canvas>
<div id='wrapper'>
<div id='transform_frame'></div>
<div id='shapes_frame'>
<div class='shape-button' id='button1'><img src='smiley.png' style='height:90%;margin-top:7px;'></div>
<div class='shape-button' id='button10'><img src='8g1_rect.svg' style='height:90%;margin-top:7px;'></div>
<div class='shape-button' id='button11'><img src='skier.svg' style='height:90%;margin-top:15px;'></div>
<div class='shape-button' id='button2'><img src='moon.png' style='height:85%;margin-top:7px;'></div>
<div class='shape-button' id='button9'><img src='breakdance_boy.svg' style='height:85%;margin-top:7px;'></div>
<div class='shape-button' id='button3'><img src='letter_a.png' style='height:85%;margin-top:11px;'></div>
<div class='shape-button' id='button8'><img src='leaf.png' style='height:90%;margin-top:5px;'></div>
<div class='shape-button' id='button4'><img src='star.svg' style='height:90%;margin-top:7px;'></div>
<div class='shape-button' id='button5'><img src='runner.png' style='height:90%;margin-top:7px;'></div>
<div class='shape-button' id='button6'><img src='hexagon.png' style='height:95%;margin-top:7px;'></div>
<div class='shape-button' id='button7'><img src='gear.png' style='height:90%;margin-top:5px;'></div>
</div>
<div id='control-box'>
<div class='transform-box' id='dilation-box' style='top:0px;left:0px;border-right:1px solid white;border-bottom:1px solid white;'>
<span style='position:absolute;bottom:5px;left:8px;font-size:18px;'>dilation</span> &times;&nbsp; <input class='transform-input' id='scalefactor' type='text' maxlength='4' />
</div>
<div class='transform-box' id='reflection-box' style='top:0px;left:250px;height:150px;width:187.5px;border-right:1px solid white;'>
<span style='position:absolute;left:18px;top:30px;font-size:14px;color:white;'>horizontal</span>
<span style='position:absolute;left:112px;top:30px;font-size:14px;color:white;'>vertical</span>
<span style='position:absolute;bottom:5px;left:43px;font-size:18px;'>reflection</span>
<div id='reflect-mapH' style='display:inline;width:67.5px;height:47.5px;background-color:black;padding:2.5px;cursor:pointer;margin-right:10px;text-align:center;border: 3px groove rgb(46, 69, 124);border-radius:5px;overflow:hidden;'>
<img id='reflectH' src='reflectH.PNG' style='height:140%;margin-top:-10px;' />
</div>
<div id='reflect-mapV' style='display:inline;width:67.5px;height:47.5px;background-color:black;padding:2.5px;cursor:pointer;text-align:center;border: 3px groove rgb(46, 69, 124);border-radius:5px;overflow:hidden;'>
<img id='reflectV' src='reflectV.png' style='height:118%;margin-top:-4px;' />
</div>
</div>
<div class='transform-box' id='rotation-box' style='bottom:0px;left:0px;border-right:1px solid white;'>
<span style='position:absolute;bottom:5px;left:8px;font-size:18px;'>rotation</span> <span style='visibility:hidden;'> &times;&nbsp;&thinsp;&thinsp; </span>
<input class='transform-input' id='rotatedegree' type='text' maxlength='4' />&deg;</span>
</div>
<div class='transform-box' id='translation-box' style='top:0px;left:437.5px;height:150px;width:187.5px;border-right:1px solid white;'>
<span style='position:absolute;top:5px;left:48px;font-size:18px;font-variant:none;'>x <input class='transform-input' id='translationX' type='text' maxlength='4' /></span>
<span style='position:absolute;top:65px;left:48px;font-size:18px;font-variant:none;'>y <input class='transform-input' id='translationY' type='text' maxlength='4' /></span>
<span style='position:absolute;bottom:5px;left:40px;font-size:18px;'>translation</span>
 &nbsp;
</div>
<div class='transform-box' style='width:125px;height:150px;left:625px;'>
<div id='grid-box' style='overflow:hidden;'></div>
<div id='challenge'><img src='leaf_outline.png' style='width:95%;' /></div>
</div>
</div>
</div>

<div id='user-box'></div>
<div id='player1'>start</div>
<img id='cursorblue' style='width:20px;height:20px;position:fixed;display:none;' src='cursorblue.svg' />
<img id='cursororange' style='width:20px;height:20px;position:fixed;display:none;' src='cursororange.svg' />

<div id='startGame'></div>
<div id='chatWindow'></div>
   
<input type='text' id='submit'></input>
</body>

<meta name="twitter:card" content="summary" /><meta name="twitter:site" content="Text Savvy" /><meta name="twitter:title" content="Geometric Transformations: The Game" /><meta name="twitter:description" content="Dilations, rotations, reflections, and translations." /><meta name="twitter:image" content="https://guzintamath.com/images/transformsgame.png" />
</html>

<script>
var outline_leafs = [{tranx : -200, trany : -140, sclx: -0.3, scly: 0.3, rot: 125}, {tranx : 250, trany : 25, sclx: 1.4, scly: -1.4, rot: -75},
                     {tranx : -150, trany : 35, sclx: 0.8, scly: 0.8, rot: -100}, {tranx : 300, trany : -100, sclx: 0.25, scly: 0.25, rot: 90}];
var outline_smile = [{tranx : 0, trany : -150, sclx: 0.5, scly: 0.5, rot: 45}, {tranx : 250, trany : 50, sclx: -1.1, scly: -1.1, rot: 110},
                     {tranx : -240, trany : 60, sclx: 1.25, scly: 1.25, rot: 0}];
var outline_moons = [{tranx : -200, trany : -100, sclx: 1, scly: 1, rot: 180}, {tranx : 210, trany : -50, sclx: -1.2, scly: -1.2, rot: 75}];
var outline_ltrAs = [{tranx : 0, trany : -50, sclx: 0.65, scly: 0.65, rot: 180}, {tranx : 210, trany : -100, sclx: -1.2, scly: -1.2, rot: 90},
                     {tranx : -170, trany : -70, sclx: 0.5, scly: -0.5, rot: 65}, {tranx : 0, trany : 30, sclx: 1.35, scly: -1.35, rot: 180}];
var outline_stars = [{tranx : 200, trany : 105, sclx: 0.45, scly: -0.45, rot: 80}, {tranx : 230, trany : -100, sclx: 1.2, scly: -1.2, rot: -75},
                     {tranx : -275, trany : -50, sclx: -0.95, scly: -0.95, rot: 150}, {tranx : -200, trany : 160, sclx: -0.4, scly: 0.4, rot: 190}];
var outline_runrs = [{tranx : 200, trany : 75, sclx: 1, scly: -1, rot: 10}, {tranx : 230, trany : -100, sclx: 1.15, scly: -1.15, rot: -90},
                     {tranx : -250, trany : -50, sclx: 0.75, scly: 0.75, rot: 150}, {tranx : -200, trany : 110, sclx: -0.4, scly: 0.4, rot: 0}];
var outline_hexns = [{tranx : 200, trany : 100, sclx: 1.75, scly: -1.75, rot: 180}, {tranx : 230, trany : -100, sclx: 1.25, scly: -1.25, rot: -90},
                     {tranx : -250, trany : -80, sclx: 2.5, scly: 2.5, rot: 150}, {tranx : -200, trany : 160, sclx: 1, scly: 1, rot: 0}];
var outline_gears = [{tranx : 200, trany : 140, sclx: 1, scly: -1, rot: 50}, {tranx : 230, trany : -100, sclx: 1.15, scly: -1.15, rot: -180},
                     {tranx : -250, trany : -50, sclx: 0.75, scly: 0.75, rot: 100}, {tranx : -200, trany : 160, sclx: -0.8, scly: 0.8, rot: 25}];
var outline_dncb1 = [{tranx : 200, trany : 75, sclx: 1, scly: -1, rot: 10}, {tranx : 230, trany : -100, sclx: 1.15, scly: -1.15, rot: -90},
                     {tranx : -250, trany : -50, sclx: 0.75, scly: 0.75, rot: 150}, {tranx : -200, trany : 110, sclx: -0.4, scly: 0.4, rot: 0}];
var outline_trins = [{tranx : 240, trany : -50, sclx: 1, scly: 1, rot: 20}, {tranx : -250, trany : 70, sclx: 1, scly: -1, rot: 180}];
var outline_skier = [{tranx : 0, trany : -150, sclx: 0.5, scly: 0.5, rot: 45}, {tranx : 250, trany : 50, sclx: -1.1, scly: -1.1, rot: 110},
                     {tranx : -240, trany : 60, sclx: 1.25, scly: 1.25, rot: 0}];

var but1 = 1; var but2 = 1; var but3 = 1; var but4 = 1; var but5 = 1; var but6 = 1; var but7 = 1; var but8 = 1; var but9 = 1; var but10 = 1; but11 = 1;
var curTransX = 0; var curTransY = 0; var curSclFac = 1; var curRotDegree = 0; var reflectStartX; var reflectStartY; var curScaleH = 1; var curScaleV = 1; var reflectHCount = 1; var reflectVCount = 1; var CHALLENGEON = false; var challengeCount = 1;
var ISFLIPPEDH = false; var ISFLIPPEDV = false;
var gridClick = 1; var playerNum; var play1Signal;

var grid_svg = d3.select('#transform_frame').append('svg').attr('width', 750).attr('height', 400)
                                                          .style('position', 'absolute').style('top', 0).style('left', 0);
var svg = d3.select('#transform_frame').append('svg').attr('width', 750).attr('height', 400)
                                                     .style('position', 'absolute').style('top', 0).style('left', 0);

$('#player1').bind('click', function(evt) {
   play1Signal = setInterval(function(){socket.send(JSON.stringify({butn: 'player1Taken'}));}, 500);
   $('#player1').animate({top : '-=50px'}, 1000, 'easeInOutBack');
   playerNum = 1;
   $('#score').fadeIn(1000);
});
$(document).bind('mousemove', function(evt) {
   var x = evt.clientX - $('#transform_frame').offset().left;
   var y = evt.clientY - $('#transform_frame').offset().top;
   socket.send(JSON.stringify({butn: 'mouse', xloc : x, yloc : y}));
});
$('#submit').bind('keypress', function(evt) {
   if (evt.keyCode !== 13) return;
   var msg = $('#submit').val();
   $('#chatWindow').prepend('<p class="message-p" style="background-color:rgba(160,82,45,0.5);">' + msg + '</p>');
   socket.send(JSON.stringify({butn: 'text', msg : msg}));
   $('#submit').val('');
});
$('#grid-box').bind('click', function(evt) {
   gridClick += 1;
   if (gridClick % 2 === 0) {
   for (var a = 0; a < 750; a += 50) {
   grid_svg.append('line')
           .attr('x1', a).attr('y1', 0).attr('x2', a).attr('y2', 400).style('stroke', 'lightgray').style('stroke-width', 1);
   grid_svg.append('line')
           .attr('x1', 0).attr('y1', a).attr('x2', 750).attr('y2', a).style('stroke', 'lightgray').style('stroke-width', 1);
   }
   grid_svg.append('text').attr('x', 25).attr('y', 390).style('font-family', 'sans-serif').style('font-size', '14px')
                          .style('fill', 'gray').attr('text-anchor', 'middle').text('50');
   grid_svg.append('line').attr('x1', 0).attr('y1', 386).attr('x2', 12).attr('y2', 386).style('stroke', 'gray');
   grid_svg.append('line').attr('x1', 38).attr('y1', 386).attr('x2', 50).attr('y2', 386).style('stroke', 'gray');
   }
   else {grid_svg.selectAll('line').remove(); grid_svg.selectAll('text').remove();}
});
$('.shape-button').bind('click', function(evt) {
   $('.transform-input').val('');
   curTransX = 0;
   curTransY = 0;
   curSclFac = 1;
   curRotDegree = 0;
   curScaleH = 1;
   curScaleV = 1;
   ISFLIPPEDH = false;
   ISFLIPPEDV = false;
   $('#reflect-mapH').css({'border' : '3px groove rgb(46, 69, 124)'});
   $('#reflect-mapV').css({'border' : '3px groove rgb(46, 69, 124)'});
   reflectHCount = 1;
   reflectVCount = 1;
   socket.send(JSON.stringify({butn: 'shape'}));
});
$('#button1').bind('mousedown', function(evt){
   but1 += 1;
   but2 = 1; but3 = 1; but4 = 1; but5 = 1; but6 = 1; but7 = 1; but8 = 1; but9 = 1; but10 = 1; but11 = 1;
   svg.selectAll("*").remove();
   if (but1 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "smiley.png")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});

   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_smile)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "smiley_outline.png")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
   socket.send(JSON.stringify({butn: 'butn1'}));
});
$('#button2').bind('mousedown', function(evt){
   but2 += 1;
   but1 = 1; but3 = 1; but4 = 1; but5 = 1; but6 = 1; but7 = 1; but8 = 1; but9 = 1; but10 = 1; but11 = 1;
   svg.selectAll("*").remove();
   if (but2 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "moon.png")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});

   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_moons)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "moon_outline.png")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
   socket.send(JSON.stringify({butn: 'butn2'}));
});
$('#button3').bind('mousedown', function(evt){
   but3 += 1;
   but1 = 1; but2 = 1; but4 = 1; but5 = 1; but6 = 1; but7 = 1; but8 = 1; but9 = 1; but10 = 1; but11 = 1;
   svg.selectAll("*").remove();
   if (but3 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "letter_a.png")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});

   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_ltrAs)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "letter_a_outline.png")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
   socket.send(JSON.stringify({butn: 'butn3'}));
});
$('#button4').bind('mousedown', function(evt){
   but4 += 1;
   but1 = 1; but2 = 1; but3 = 1; but5 = 1; but6 = 1; but7 = 1; but8 = 1; but9 = 1; but10 = 1; but11 = 1;
   svg.selectAll("*").remove();
   if (but4 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "star.svg")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});

   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_stars)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "star_outline.png")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
   socket.send(JSON.stringify({butn: 'butn4'}));
});
$('#button5').bind('mousedown', function(evt){
   but5 += 1;
   but1 = 1; but2 = 1; but3 = 1; but4 = 1; but6 = 1; but7 = 1; but8 = 1; but9 = 1; but10 = 1; but11 = 1;
   svg.selectAll("*").remove();
   if (but5 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "runner.png")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});

   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_runrs)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "runner_outline.png")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
   socket.send(JSON.stringify({butn: 'butn5'}));
});
$('#button6').bind('mousedown', function(evt){
   but6 += 1;
   but1 = 1; but2 = 1; but3 = 1; but4 = 1; but5 = 1; but7 = 1; but8 = 1; but9 = 1; but10 = 1; but11 = 1;
   svg.selectAll("*").remove();
   if (but6 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "hexagon.png")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});

   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_hexns)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "hexagon_outline.png")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
   socket.send(JSON.stringify({butn: 'butn6'}));
});
$('#button7').bind('mousedown', function(evt){
   but7 += 1;
   but1 = 1; but2 = 1; but3 = 1; but4 = 1; but5 = 1; but6 = 1; but8 = 1; but9 = 1; but10 = 1; but11 = 1;
   svg.selectAll("*").remove();
   if (but7 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "gear.png")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});

   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_gears)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "gear_outline.png")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
   socket.send(JSON.stringify({butn: 'butn7'}));
});
$('#button8').bind('mousedown', function(evt){
   but8 += 1;
   but1 = 1; but2 = 1; but3 = 1; but4 = 1; but5 = 1; but6 = 1; but7 = 1; but9 = 1; but10 = 1; but11 = 1;
   svg.selectAll("*").remove();
   if (but8 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "leaf.png")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});
   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_leafs)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "leaf_outline.png")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
   socket.send(JSON.stringify({butn: 'butn8'}));
});
$('#button9').bind('mousedown', function(evt){
   but9 += 1;
   but1 = 1; but2 = 1; but3 = 1; but4 = 1; but5 = 1; but6 = 1; but7 = 1; but8 = 1; but10 = 1; but11 = 1;
   svg.selectAll("*").remove();
   if (but9 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "breakdance_boy.svg")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});
   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_dncb1)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "breakdance_boy.png")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
   socket.send(JSON.stringify({butn: 'butn9'}));
});
$('#button10').bind('mousedown', function(evt){
   but10 += 1;
   but1 = 1; but2 = 1; but3 = 1; but4 = 1; but5 = 1; but6 = 1; but7 = 1; but8 = 1; but9 = 1; but11 = 1;
   svg.selectAll("*").remove();
   if (but10 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "8g1_rect.svg")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});
   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_trins)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "rect_outline.svg")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
   socket.send(JSON.stringify({butn: 'butn10'}));
});
$('#button11').bind('mousedown', function(evt){
   but11 += 1;
   but1 = 1; but2 = 1; but3 = 1; but4 = 1; but5 = 1; but6 = 1; but7 = 1; but8 = 1; but9 = 1; but10 = 1;
   svg.selectAll("*").remove();
   if (but11 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "skier.svg")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});
   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_skier)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "skier_outline.svg")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
   socket.send(JSON.stringify({butn: 'butn11'}));
});
$('.transform-input').bind('keydown', function(evt) {
   if (evt.keyCode !== 13) return;
   socket.send(JSON.stringify({butn : 'input', input : evt.target.id, val : $('#' + evt.target.id).val()}));
   if (evt.target.id === 'translationX') translateX();
   else if (evt.target.id === 'translationY') translateY();
   else if (evt.target.id === 'scalefactor') dilate();
   else if (evt.target.id === 'rotatedegree') rotateFig();
   if (playerNum) {
      socket.send(JSON.stringify({butn: 'moveMade'}));
      $('#sheath').show();
   }
});
function translateX() {
   if (($('#translationX').val()).length < 1) $('#translationX').val('0');
   if (isNaN(Number($('#translationX').val()))) return;
   if ($('#translationX').val() === '') return;
   $('#translationY').val('');
   var x = String(Number($('#translationX').val()) + curTransX);
   var y = curTransY;
   svg.select('#curTransformFig').transition()
   .duration(1200)
   .ease(d3.easeCubicInOut)
   .attr('transform', 'translate('+x+', '+y+')'+'scale('+String(curScaleH * curSclFac)+ ', ' + String(curScaleV * curSclFac) + ') rotate(' + curRotDegree + ')');
   curTransX = Number(x);
}
function translateY() {
   if (($('#translationY').val()).length < 1) $('#translationY').val('0');
   if (isNaN(Number($('#translationY').val()))) return;
   if ($('#translationY').val() === '') return;
   $('#translationX').val('');
   var x = curTransX;
   var y = String(-Number($('#translationY').val()) + curTransY);
   svg.select('#curTransformFig').transition()
   .duration(1200)
   .ease(d3.easeCubicInOut)
   .attr('transform', 'translate('+x+', '+y+')'+'scale('+String(curScaleH * curSclFac)+ ', ' + String(curScaleV * curSclFac) + ') rotate(' + curRotDegree + ')');
   curTransY = Number(y);
}
function dilate() {
   if (($('#scalefactor').val()).length < 1) return;
   if (isNaN(Number($('#scalefactor').val())) || Number($('#scalefactor').val()) < 0) return;
   var scalefactor = String(Number($('#scalefactor').val()) * curSclFac);
   svg.select('#curTransformFig').style('-webkit-transform-origin', '50% 50%').style('transform-origin', 'center')
      .transition()
      .duration(1200)
      .ease(d3.easeCubicInOut)
      .attr('transform', 'translate('+String(curTransX)+ ', '+String(curTransY)+')'+'scale('+String(curScaleH * scalefactor)+', '+String(curScaleV * scalefactor) + ') rotate(' + String(curRotDegree) + ')');
   curSclFac = Number(scalefactor);
}
function rotateFig() {
 if (isNaN(Number($('#rotatedegree').val()))) return;
 if ((ISFLIPPEDH === true && ISFLIPPEDV === false) || (ISFLIPPEDV === true && ISFLIPPEDH === false)) var sign = 1;
 else var sign = -1;
 var rotDegree = String(sign * Number($('#rotatedegree').val()) + curRotDegree);
 var o='translate('+String(curTransX)+', '+String(curTransY)+')'+'scale('+String(curScaleH*curSclFac)+', '+String(curScaleV*curSclFac)+')'+'rotate('+curRotDegree+')';
 var n='translate('+String(curTransX)+', '+String(curTransY)+')'+'scale('+String(curScaleH*curSclFac)+', '+String(curScaleV*curSclFac)+')'+'rotate('+rotDegree+')';
 svg.select('#curTransformFig').style('-webkit-transform-origin', '50% 50%').style('transform-origin', 'center')
 .transition()
 .duration(1200)
 .ease(d3.easeCubicInOut)
 .attrTween("transform", function(interpolate) {return d3.interpolate(o, n);});
 curRotDegree = Number(rotDegree);
}
$('#reflectH').bind('click', function(evt){
   reflectHCount += 1;
   if (reflectHCount % 2 === 0) $('#reflect-mapH').css({'border' : '3px groove pink'});
   else $('#reflect-mapH').css({'border' : '3px groove rgb(46, 69, 124)'});
   var origScale='translate('+String(curTransX)+', '+String(curTransY)+')'+'scale('+String(curScaleH*curSclFac)+', '+String(curScaleV*curSclFac)+')'+'rotate('+ curRotDegree+')';
   var newbScale = 'translate('+String(curTransX)+', '+String(curTransY)+')'+'scale('+String(-1 * curScaleH*curSclFac)+', '+String(curScaleV*curSclFac)+')'+'rotate('+ curRotDegree+')';
   if (ISFLIPPEDH === false) ISFLIPPEDH = true;
   else ISFLIPPEDH = false;
   svg.select('#curTransformFig').style('-webkit-transform-origin', '50% 50%').style('transform-origin', 'center')
   .transition()
   .duration(1200)
   .ease(d3.easeCubicInOut)
   .attrTween("transform", function(interpolate) {return d3.interpolate(origScale, newbScale);});
   curScaleH *= -1;
   socket.send(JSON.stringify({butn: 'reflectH'}));
   if (playerNum) $('#sheath').show();
});
$('#reflectV').bind('click', function(evt){
   reflectVCount += 1;
   if (reflectVCount % 2 === 0) $('#reflect-mapV').css({'border' : '3px groove pink'});
   else $('#reflect-mapV').css({'border' : '3px groove rgb(46, 69, 124)'});
   var origScale='translate('+String(curTransX)+', '+String(curTransY)+')'+'scale('+String(curScaleH*curSclFac)+', '+String(curScaleV*curSclFac)+')'+'rotate('+ curRotDegree+')';
   var newbScale = 'translate('+String(curTransX)+', '+String(curTransY)+')'+'scale('+String(curScaleH*curSclFac)+', '+String(-1 * curScaleV*curSclFac)+')'+'rotate('+ curRotDegree+')';
   if (ISFLIPPEDV === false) ISFLIPPEDV = true;
   else ISFLIPPEDV = false;
   svg.select('#curTransformFig').style('-webkit-transform-origin', '50% 50%').style('transform-origin', 'center')
   .transition()
   .duration(1200)
   .ease(d3.easeCubicInOut)
   .attrTween("transform", function(interpolate) {return d3.interpolate(origScale, newbScale);});
   curScaleV *= -1;
   socket.send(JSON.stringify({butn: 'reflectV'}));
   if (playerNum) $('#sheath').show();
});
$('#challenge').bind('click', function(evt){
   challengeCount += 1;
   if (challengeCount % 2 === 0) {
   $(this).css({'background-color' : 'yellow'});
   CHALLENGEON = true;
   }
   else {
   $(this).css({'background-color' : 'white'});
   CHALLENGEON = false;
   }
   socket.send(JSON.stringify({butn: 'challenge'}));
});
$('.transform-input').bind('focus', function(evt){$('#' + evt.target.id).val(''); socket.send(JSON.stringify({butn: 'focus', input : evt.target.id}));});

$('#control-box').offset({left : $('#transform_frame').offset().left, top : $('#transform_frame').offset().top + 418});
$('#startGame').offset({left : $('#transform_frame').offset().left + 200, top : $('#transform_frame').offset().top + 50});
$('#player1, #score').offset({left : (window.innerWidth / 2) - 75});

$(window).resize(function(){
   $('#control-box').offset({left : $('#transform_frame').offset().left, top : $('#transform_frame').offset().top + 418});
   $('#startGame').offset({left : $('#transform_frame').offset().left + 200, top : $('#transform_frame').offset().top + 50});
   $('#player1, #score').offset({left : (window.innerWidth / 2) - 75});
});
$(window).scroll(function(){
   $('#control-box').offset({left : $('#transform_frame').offset().left, top : $('#transform_frame').offset().top + 418});
   $('#startGame').offset({left : $('#transform_frame').offset().left + 200, top : $('#transform_frame').offset().top + 50});
   $('#player1, #score').offset({left : (window.innerWidth / 2) - 75});
});

$(window).unload(function(evt) {
   socket.send(JSON.stringify({butn: 'unload'}));
});

var socket = new WebSocket("wss://node2.wsninja.io");
socket.addEventListener('open', function(event) {socket.send(JSON.stringify({ guid: "62616484-260b-4b39-b09d-d943dcfba70d" }));});
socket.addEventListener('message', function(event) {handleMessage(JSON.parse(event.data));});

function handleMessage(message) {
        if (message.butn === 'mouse') handleMouse(message);
   else if (message.butn === 'butn1') button1Press();
   else if (message.butn === 'butn2') button2Press();
   else if (message.butn === 'butn3') button3Press();
   else if (message.butn === 'butn4') button4Press();
   else if (message.butn === 'butn5') button5Press();
   else if (message.butn === 'butn6') button6Press();
   else if (message.butn === 'butn7') button7Press();
   else if (message.butn === 'butn8') button8Press();
   else if (message.butn === 'butn9') button9Press();
   else if (message.butn === 'butn10') button10Press();
   else if (message.butn === 'butn11') button11Press();
   else if (message.butn === 'input') inputEntered(message);
   else if (message.butn === 'shape') shapePressed();
   else if (message.butn === 'reflectH') reflectHPressed();
   else if (message.butn === 'reflectV') reflectVPressed();
   else if (message.butn === 'challenge') challengePressed();
   else if (message.butn === 'focus') focusInput(message);
   else if (message.butn === 'player1Taken') setStatus2();
   else if (message.butn === 'clearInterval') {
      clearInterval(play1Signal);
      $('#startGame').html('<p>Let\'s go! You are Player 1. Take turns and work together with Player 2 to match all the transformations of this shape:</p><img src="leaf.png" style="display:block;margin:-8px auto 0 auto;width75px;height:75px;" /><button id="closeIntro" onclick="closeIntro()" style="position:absolute;width:100px;height:50px;left:125px;bottom:10px;border:1px solid white;background-color:black;color:white;border-radius:5px;cursor:pointer;">Close</button>');
      $('#startGame').fadeIn();
   }
   else if (message.butn === 'unload') playerRefresh();
   else if (message.butn === 'moveMade') moveMade();
   else if (message.butn === 'text') handleText(message);
}
function handleMouse(msg) {
   if (playerNum === 1) var cursor = '#cursororange';
   else if (playerNum === 2) var cursor = '#cursorblue';
   else return;
   $(cursor).fadeIn();
   $(cursor).offset({top : msg.yloc + $('#transform_frame').offset().top, left : msg.xloc + $('#transform_frame').offset().left});
}
function moveMade() {
   if (playerNum) $('#sheath').hide();
}
function handleText(msge) {
   $('#chatWindow').prepend('<p class="message-p" style="background-color:rgba(255,165,0,0.5);">' + msge.msg + '</p>');
}
function focusInput(msg) {$('#' + msg.input).val('');}
function playerRefresh() {location.reload();}
function inputEntered(msg) {
   $('#' + msg.input).val(msg.val);
   if (msg.input === 'translationX') translateX();
   else if (msg.input === 'translationY') translateY();
   else if (msg.input === 'scalefactor') dilate();
   else if (msg.input === 'rotatedegree') rotateFig();
}
function setStatus2() {
   $('#player1').animate({top : '-=50px'}, 1000, 'easeInOutBack');
   playerNum = 2;
   clearInterval(play1Signal);
   socket.send(JSON.stringify({butn: 'clearInterval'}));
   $('#startGame').html('<p>Let\'s go! You are Player 2. Take turns and work together with Player 1 to match all the transformations of this shape:</p><img src="leaf.png" style="display:block;margin:-8px auto 0 auto;width75px;height:75px;" /><button id="closeIntro" onclick="closeIntro()" style="position:absolute;width:100px;height:50px;left:125px;bottom:10px;border:1px solid white;background-color:black;color:white;border-radius:5px;cursor:pointer;">Close</button>');
   $('#sheath').show();
   $('#startGame').fadeIn();
   $('#score').fadeIn(1000);
}
function closeIntro() {$('#startGame').fadeOut(1000);}
function challengePressed() {
   challengeCount += 1;
   if (challengeCount % 2 === 0) {
   $('#challenge').css({'background-color' : 'yellow'});
   CHALLENGEON = true;
   }
   else {
   $('#challenge').css({'background-color' : 'white'});
   CHALLENGEON = false;
   }
}
function shapePressed() {
   $('.transform-input').val('');
   curTransX = 0;
   curTransY = 0;
   curSclFac = 1;
   curRotDegree = 0;
   curScaleH = 1;
   curScaleV = 1;
   ISFLIPPEDH = false;
   ISFLIPPEDV = false;
   $('#reflect-mapH').css({'border' : '3px groove rgb(46, 69, 124)'});
   $('#reflect-mapV').css({'border' : '3px groove rgb(46, 69, 124)'});
   reflectHCount = 1;
   reflectVCount = 1;
}
function reflectHPressed() {
   reflectHCount += 1;
   if (reflectHCount % 2 === 0) $('#reflect-mapH').css({'border' : '3px groove pink'});
   else $('#reflect-mapH').css({'border' : '3px groove rgb(46, 69, 124)'});
   var origScale='translate('+String(curTransX)+', '+String(curTransY)+')'+'scale('+String(curScaleH*curSclFac)+', '+String(curScaleV*curSclFac)+')'+'rotate('+ curRotDegree+')';
   var newbScale = 'translate('+String(curTransX)+', '+String(curTransY)+')'+'scale('+String(-1 * curScaleH*curSclFac)+', '+String(curScaleV*curSclFac)+')'+'rotate('+ curRotDegree+')';
   if (ISFLIPPEDH === false) ISFLIPPEDH = true;
   else ISFLIPPEDH = false;
   svg.select('#curTransformFig').style('-webkit-transform-origin', '50% 50%').style('transform-origin', 'center')
   .transition()
   .duration(1200)
   .ease(d3.easeCubicInOut)
   .attrTween("transform", function(interpolate) {return d3.interpolate(origScale, newbScale);});
   curScaleH *= -1;
   if (playerNum) $('#sheath').hide();
}
function reflectVPressed() {
   reflectVCount += 1;
   if (reflectVCount % 2 === 0) $('#reflect-mapV').css({'border' : '3px groove pink'});
   else $('#reflect-mapV').css({'border' : '3px groove rgb(46, 69, 124)'});
   var origScale='translate('+String(curTransX)+', '+String(curTransY)+')'+'scale('+String(curScaleH*curSclFac)+', '+String(curScaleV*curSclFac)+')'+'rotate('+ curRotDegree+')';
   var newbScale = 'translate('+String(curTransX)+', '+String(curTransY)+')'+'scale('+String(curScaleH*curSclFac)+', '+String(-1 * curScaleV*curSclFac)+')'+'rotate('+ curRotDegree+')';
   if (ISFLIPPEDV === false) ISFLIPPEDV = true;
   else ISFLIPPEDV = false;
   svg.select('#curTransformFig').style('-webkit-transform-origin', '50% 50%').style('transform-origin', 'center')
   .transition()
   .duration(1200)
   .ease(d3.easeCubicInOut)
   .attrTween("transform", function(interpolate) {return d3.interpolate(origScale, newbScale);});
   curScaleV *= -1;
   if (playerNum) $('#sheath').hide();
}
function button1Press() {
   but1 += 1;
   but2 = 1; but3 = 1; but4 = 1; but5 = 1; but6 = 1; but7 = 1; but8 = 1; but9 = 1; but10 = 1; but11 = 1;
   svg.selectAll("*").remove();
   if (but1 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "smiley.png")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});

   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_smile)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "smiley_outline.png")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
}
function button2Press() {
   but2 += 1;
   but1 = 1; but3 = 1; but4 = 1; but5 = 1; but6 = 1; but7 = 1; but8 = 1; but9 = 1; but10 = 1; but11 = 1;
   svg.selectAll("*").remove();
   if (but2 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "moon.png")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});

   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_moons)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "moon_outline.png")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
}
function button3Press() {
   but3 += 1;
   but1 = 1; but2 = 1; but4 = 1; but5 = 1; but6 = 1; but7 = 1; but8 = 1; but9 = 1; but10 = 1; but11 = 1;
   svg.selectAll("*").remove();
   if (but3 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "letter_a.png")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});

   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_ltrAs)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "letter_a_outline.png")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
}
function button4Press() {
   but4 += 1;
   but1 = 1; but2 = 1; but3 = 1; but5 = 1; but6 = 1; but7 = 1; but8 = 1; but9 = 1; but10 = 1; but11 = 1;
   svg.selectAll("*").remove();
   if (but4 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "star.svg")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});

   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_stars)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "star_outline.png")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
}
function button5Press() {
   but5 += 1;
   but1 = 1; but2 = 1; but3 = 1; but4 = 1; but6 = 1; but7 = 1; but8 = 1; but9 = 1; but10 = 1; but11 = 1;
   svg.selectAll("*").remove();
   if (but5 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "runner.png")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});

   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_runrs)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "runner_outline.png")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
}
function button6Press() {
   but6 += 1;
   but1 = 1; but2 = 1; but3 = 1; but4 = 1; but5 = 1; but7 = 1; but8 = 1; but9 = 1; but10 = 1; but11 = 1;
   svg.selectAll("*").remove();
   if (but6 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "hexagon.png")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});

   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_hexns)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "hexagon_outline.png")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
}
function button7Press() {
   but7 += 1;
   but1 = 1; but2 = 1; but3 = 1; but4 = 1; but5 = 1; but6 = 1; but8 = 1; but9 = 1; but10 = 1; but11 = 1;
   svg.selectAll("*").remove();
   if (but7 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "gear.png")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});

   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_gears)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "gear_outline.png")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
}
function button8Press() {
   but8 += 1;
   but1 = 1; but2 = 1; but3 = 1; but4 = 1; but5 = 1; but6 = 1; but7 = 1; but9 = 1; but10 = 1; but11 = 1;
   svg.selectAll("*").remove();
   if (but8 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "leaf.png")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});
   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_leafs)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "leaf_outline.png")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
}
function button9Press() {
   but9 += 1;
   but1 = 1; but2 = 1; but3 = 1; but4 = 1; but5 = 1; but6 = 1; but7 = 1; but8 = 1; but10 = 1; but11 = 1;
   svg.selectAll("*").remove();
   if (but9 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "breakdance_boy.svg")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});
   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_dncb1)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "breakdance_boy.png")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
}
function button10Press() {
   but10 += 1;
   but1 = 1; but2 = 1; but3 = 1; but4 = 1; but5 = 1; but6 = 1; but7 = 1; but8 = 1; but9 = 1; but11 = 1;
   svg.selectAll("*").remove();
   if (but10 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "8g1_rect.svg")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});
   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_trins)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "rect_outline.svg")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
}
function button11Press() {
   but11 += 1;
   but1 = 1; but2 = 1; but3 = 1; but4 = 1; but5 = 1; but6 = 1; but7 = 1; but8 = 1; but9 = 1; but10 = 1;
   svg.selectAll("*").remove();
   if (but11 % 2 === 0) {
   svg.append('svg:image')
   .attr("xlink:href", "skier.svg")
   .attr('id', 'curTransformFig')
   .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100);
   $('.transform-box').css({'opacity' : 1, 'pointer-events' : 'all'});
   if (CHALLENGEON === true) {
   svg.selectAll('.outline_img')
      .data(outline_skier)
      .enter()
      .append('svg:image')
      .style('-webkit-transform-origin', '50% 50%')
      .style('transform-origin', 'center')
      .attr("xlink:href", "skier_outline.svg")
      .attr('width', 200).attr('height', 200).attr('x', 275).attr('y', 100)
      .attr('transform', function(d){return 'translate(' + d.tranx + ', ' + d.trany + ') scale(' + d.sclx + ', ' + d.scly + ') rotate(' + d.rot + ')'});
   }
   }
   else {$('.transform-box').css({'opacity' : 0.5, 'pointer-events' : 'none'});}
}
</script>
