<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<style>
html {
   background:rgb(51, 51, 51);
}
#platform_IMG {
   position:relative;
   width:500px;
   height:550px;
   background:rgb(51, 51, 51);
   margin:20px auto 20px auto;
   border:2px solid white;
   border-radius:20px;
   overflow:hidden;
}
.list_IMG {
   position:absolute;
   width:400px;
   left:50px;
   top:30px;
   font-size:2em;
   color:white;
   display:none;
}
.list_IMG td {
   width:100px;
   padding-top:10px;
}
.list_inps {
   font-size:0.6em;
   width:120px;
   height:40px;
   text-align:center;
}
.submit_IMG {
   padding:0px;
   position:absolute;
   bottom:10px;
   left:200px;
   width:100px;
   height:40px;
   border-radius:5px;
   border:2px solid #C65D57;
   font-variant:small-caps;
   background:white;
   font-size:1.4em;
}
.submit_IMG:hover {
   cursor:pointer;
   background:#939393;
}
.submit_IMG:focus {
   outline:0;
}
button[name="test1But"], button[name="nextStudyBut"], button[name="study2But"], button[name="test2But"], button[name="resultsBut"] {
   display:none;
}
#results_canvas {
   display:block;
   margin:50px auto 0px auto;
   width:400px;
   height:400px;
}
@-moz-keyframes goNextStudy {
    from {-moz-transform:rotateY(0deg);}       
    to {-moz-transform:rotateY(720deg);}                       
}
@-webkit-keyframes goNextStudy {
    from{-webkit-transform:rotateY(0deg);}       
    to {-webkit-transform:rotateY(720deg);}                
}
@keyframes goNextStudy {
    from{transform:rotateY(0deg);}       
    to {transform:rotateY(720deg);}                
}
@-moz-keyframes goResults {
    from {-moz-transform:rotateY(720deg);}       
    to {-moz-transform:rotateY(0deg);}                       
}
@-webkit-keyframes goResults {
    from{-webkit-transform:rotateY(720deg);}       
    to {-webkit-transform:rotateY(0deg);}                
}
@keyframes goResults {
    from{transform:rotateY(720deg);}       
    to {transform:rotateY(0deg);}                
}
</style>
</head>
<body>
<div id='platform_IMG'>
<canvas id='results_canvas' width='400px' height='400px' style='display:none;'>Canvas is not supported.</canvas>
<table class='list_IMG' name='list1'>
<tbody>
</tbody>
</table>
<table class='list_IMG' name='list3'>
<tbody>
</tbody>
</table>
<table class='list_IMG' name='list2' style='display:none;'>
<tr><td style='text-align:right;'><input class='list_inps' type='text' name='list1_c11'></input></td><td style='text-align:center;'>:</td><td><input class='list_inps' 

type='text' name='list1_c12'></input></td></tr>
<tr><td style='text-align:right;'><input class='list_inps' type='text' name='list1_c21'></input></td><td style='text-align:center;'>:</td><td><input class='list_inps' 

type='text' name='list1_c22'></input></td></tr>
<tr><td style='text-align:right;'><input class='list_inps' type='text' name='list1_c31'></input></td><td style='text-align:center;'>:</td><td><input class='list_inps' 

type='text' name='list1_c32'></input></td></tr>
<tr><td style='text-align:right;'><input class='list_inps' type='text' name='list1_c41'></input></td><td style='text-align:center;'>:</td><td><input class='list_inps' 

type='text' name='list1_c42'></input></td></tr>
<tr><td style='text-align:right;'><input class='list_inps' type='text' name='list1_c51'></input></td><td style='text-align:center;'>:</td><td><input class='list_inps' 

type='text' name='list1_c52'></input></td></tr>
<tr><td style='text-align:right;'><input class='list_inps' type='text' name='list1_c61'></input></td><td style='text-align:center;'>:</td><td><input class='list_inps' 

type='text' name='list1_c62'></input></td></tr>
<tr><td style='text-align:right;'><input class='list_inps' type='text' name='list1_c71'></input></td><td style='text-align:center;'>:</td><td><input class='list_inps' 

type='text' name='list1_c72'></input></td></tr>
</table>
<table class='list_IMG' name='list4' style='display:none;'>
<tr><td style='text-align:right;'><input class='list_inps' type='text' name='list1_d11'></input></td><td style='text-align:center;'>:</td><td><input class='list_inps' 

type='text' name='list1_d12'></input></td></tr>
<tr><td style='text-align:right;'><input class='list_inps' type='text' name='list1_d21'></input></td><td style='text-align:center;'>:</td><td><input class='list_inps' 

type='text' name='list1_d22'></input></td></tr>
<tr><td style='text-align:right;'><input class='list_inps' type='text' name='list1_d31'></input></td><td style='text-align:center;'>:</td><td><input class='list_inps' 

type='text' name='list1_d32'></input></td></tr>
<tr><td style='text-align:right;'><input class='list_inps' type='text' name='list1_d41'></input></td><td style='text-align:center;'>:</td><td><input class='list_inps' 

type='text' name='list1_d42'></input></td></tr>
<tr><td style='text-align:right;'><input class='list_inps' type='text' name='list1_d51'></input></td><td style='text-align:center;'>:</td><td><input class='list_inps' 

type='text' name='list1_d52'></input></td></tr>
<tr><td style='text-align:right;'><input class='list_inps' type='text' name='list1_d61'></input></td><td style='text-align:center;'>:</td><td><input class='list_inps' 

type='text' name='list1_d62'></input></td></tr>
<tr><td style='text-align:right;'><input class='list_inps' type='text' name='list1_d71'></input></td><td style='text-align:center;'>:</td><td><input class='list_inps' 

type='text' name='list1_d72'></input></td></tr>
</table>
<button name='study1But' class='submit_IMG' onclick = 'goToStudy1()'>study <span style='font-size:0.7em;'>1</span></button>
<button name='test1But' class='submit_IMG' onclick = 'goToTest1()'>test <span style='font-size:0.7em;'>1</span></button>
<button name='nextStudyBut' class='submit_IMG' onclick = 'goToNextStudy()'>next</button>
<button name='study2But' class='submit_IMG' onclick = 'goToStudy2()'>study <span style='font-size:0.7em;'>2</span></button>
<button name='test2But' class='submit_IMG' onclick = 'goToTest2()'>test <span style='font-size:0.7em;'>2</span></button>
<button name='resultsBut' class='submit_IMG' onclick = 'goToResults()'>results</button>
</div>
</body>
</html>

<script>
var list1_dict = {'plane' : 'train', 'horse' : 'wagon', 'plate' : 'napkin', 'trout' : 'typewriter', 'river' : 'peanut', 'driveway' : 'vacuum', 'soldier' : 'infant'};
var list2_dict = {'slow' : 'fast', 'tall' : 'short', 'dirty' : 'clean', 'left' : 'right', 'liberal' : 'conservative', 'beginning' : 'end', 'expensive' : 'cheap'}
var startStudy1;
var endStudy1;
var startTest1;
var endTest1;
var startStudy2;
var endStudy2;
var startTest2;
var endTest2;
var res1KeyItem = 0;
var res1ItemKey = 0;
var res2KeyItem = 0;
var res2ItemKey = 0;

function goToStudy1() {
   startStudy1 = new Date().getTime();
   for (var item in list1_dict) {
      $('table[name="list1"] > tbody:last').append("<tr><td style='text-align:right;'>" + item + "</td><td style='text-align:center;'>:</td><td>" + list1_dict[item] + 

"</td></tr>");
   }
   $('table[name="list1"]').show();
   $('button[name="study1But"]').hide();
   $('button[name="test1But"]').show();
}
function goToTest1() {
   endStudy1 = new Date().getTime();
   $('table[name="list1"]').hide();
   $('table[name="list2"]').show();
   $('button[name="test1But"]').hide();
   $('button[name="nextStudyBut"]').show();
   startTest1 = new Date().getTime();
}
function goToNextStudy() {
   endTest1 = new Date().getTime();
   var evenList = [];
   var oddList = [];
   var usedList = [];
   $('table[name="list2"] .list_inps:even').each(function() {evenList.push($.trim($(this).val().toLowerCase()));});
   $('table[name="list2"] .list_inps:odd').each(function() {oddList.push($.trim($(this).val().toLowerCase()));});
   for (var a = 0; a < 7; a++) {
      if (evenList[a] in list1_dict && list1_dict[evenList[a]] === oddList[a] && $.inArray(evenList[a], usedList) == -1) {
         res1KeyItem += 1;
         usedList.push(evenList[a]);
      }
      else if (oddList[a] in list1_dict && list1_dict[oddList[a]] === evenList[a] && $.inArray(oddList[a], usedList) == -1) {
         res1ItemKey += 1;
         usedList.push(oddList[a]);
      }
   }
   $('#platform_IMG').css({
      "-webkit-animation-name": 'goNextStudy',
      "-webkit-animation-duration" : "1.5s",
      "-webkit-animation-iteration-count" : "1",
      "-webkit-animation-fill-mode" : "forwards"});
   $('#platform_IMG').css({
      "animation-name": 'goNextStudy',
      "animation-duration" : "1.5s",
      "animation-iteration-count" : "1",
      "animation-fill-mode" : "forwards"});
   setTimeout(function() {
      $('table[name="list2"]').hide();
      $('button[name="nextStudyBut"]').hide();
      $('button[name="study2But"]').show();}, 600);
}
function goToStudy2() {
   startStudy2 = new Date().getTime();
   for (var item in list2_dict) $('table[name="list3"] > tbody:last').append("<tr><td style='text-align:right;'>" + item + 
				                                         "</td><td style='text-align:center;'>:</td><td>" + list2_dict[item].slice(0, 1) +
						           " <input type='text' style='width:90px;vertical-align:5px;height:25px;font-

size:0.5em;'></input></td></tr>");
   $('table[name="list3"]').show();
   $('button[name="study2But"]').hide();
   $('button[name="test2But"]').show();
}
function goToTest2() {
   endStudy2 = new Date().getTime();
   $('table[name="list3"]').hide();
   $('table[name="list4"]').show();
   $('button[name="test2But"]').hide();
   $('button[name="resultsBut"]').show();
   startTest2 = new Date().getTime();
}
function goToResults() {
   endTest2 = new Date().getTime();
   var evenList = [];
   var oddList = [];
   var usedList = [];
   $('table[name="list4"] .list_inps:even').each(function() {evenList.push($.trim($(this).val().toLowerCase()));});
   $('table[name="list4"] .list_inps:odd').each(function() {oddList.push($.trim($(this).val().toLowerCase()));});
   for (var a = 0; a < 7; a++) {
      if (evenList[a] in list2_dict && list2_dict[evenList[a]] === oddList[a] && $.inArray(evenList[a], usedList) == -1) {
         res2KeyItem += 1;
         usedList.push(evenList[a]);
      }
      else if (oddList[a] in list2_dict && list2_dict[oddList[a]] === evenList[a] && $.inArray(oddList[a], usedList) == -1) {
         res2ItemKey += 1;
         usedList.push(oddList[a]);
      }
   }
   $('#platform_IMG').css({
      "-webkit-animation-name": 'goResults',
      "-webkit-animation-duration" : "1.5s",
      "-webkit-animation-iteration-count" : "1",
      "-webkit-animation-fill-mode" : "forwards"});
   $('#platform_IMG').css({
      "animation-name": 'goResults',
      "animation-duration" : "1.5s",
      "animation-iteration-count" : "1",
      "animation-fill-mode" : "forwards"});
   setTimeout(function() {
      $('table[name="list4"]').hide();
      $('button[name="resultsBut"]').hide();}, 600);

   var canvas = document.getElementById('results_canvas');
   var context = canvas.getContext('2d');

   var test1Results = res1KeyItem + res1ItemKey;
   var test2Results = res2KeyItem + res2ItemKey;
   var studyTime1 = (endStudy1 - startStudy1) / 1000;
   var studyTime2 = (endStudy2 - startStudy2) / 1000;
   var testTime1 = (endTest1 - startTest1) / 1000;
   var testTime2 = (endTest2 - startTest2) / 1000;

   context.beginPath();
   context.strokeStyle = 'white';
   context.moveTo(0, canvas.height - 50);
   context.lineTo(canvas.width, canvas.height - 50);
   context.stroke();

   context.beginPath();
   context.fillStyle = 'yellow';
   context.rect(50, canvas.height - studyTime1 - testTime1 - 50, 100, studyTime1 + testTime1);
   context.fill();

   context.beginPath();
   context.fillStyle = 'yellow';
   context.rect(250, canvas.height - studyTime2 - testTime2 - 50, 100, studyTime2 + testTime2);
   context.fill();

   context.fillStyle = 'yellow';
   context.font = '16px Arial';
   context.textAlign = 'center';
   context.fillText('(' + (studyTime1 + testTime1).toFixed(1) + ' s)', 100, canvas.height - studyTime1 - testTime1 - 90);
   context.fillText('(' + (studyTime2 + testTime2).toFixed(1) + ' s)', 300, canvas.height - studyTime2 - testTime2 - 90);
   setTimeout(function() {
      $('#results_canvas').fadeIn(1500);
      context.fillStyle = 'white';
      context.fillText('Test 1', 100, canvas.height - 28);
      context.fillText('Test 2', 300, canvas.height - 28);
      context.fillText((test1Results / 7 * 100).toFixed(2) + '%', 100, canvas.height - 5);
      context.fillText((test2Results / 7 * 100).toFixed(2) + '%', 300, canvas.height - 5);
   }, 800);
}
</script>
