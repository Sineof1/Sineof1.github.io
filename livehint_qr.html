<html lang='en'>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>LiveHint QR</title>
</head>

<body>
<script SameSite="None; Secure" src="https://static.landbot.io/landbot-widget/landbot-widget-1.0.0.js"></script>
<script>
const queryString = window.location.search;
const urlParams = new URLSearchParams(queryString);

const course = urlParams.get('course');
const module = urlParams.get('module');
const pagenm = urlParams.get('page');
var userUniqueID, setCourse, setModule;

userUniqueID = localStorage.getItem('userUniqueID');
setCourse = localStorage.getItem('userCourse');
setModule = localStorage.getItem('userModule');
   
if (userUniqueID === null) {
   userUniqueID = create_UUID();
   localStorage.setItem('userUniqueID', userUniqueID);
}
function setTheCourse(crs) {localStorage.setItem('userCourse', crs);}
function setTheModule(mod) {localStorage.setItem('userModule', mod);}
function create_UUID(){
    var dt = new Date().getTime();
    var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
       var r = (dt + Math.random()*16)%16 | 0;
       dt = Math.floor(dt/16);
       return (c=='x' ? r :(r&0x3|0x8)).toString(16);
    });
    return uuid;
}

var myLandbot = new LandbotFullpage({
index: `https://landbot.io/u/H-476750-FBOGF72L39X0UFUW/index.html?course=${course}&module=${module}&page=${pagenm}&uniqueid=${userUniqueID}&setcourse=${setCourse}&setmodule=${setModule}`,
});
myLandbot.on('setCourse', function(data1){setTheCourse(data1);});
myLandbot.on('setModule', function(data2){setTheModule(data2);});
</script>
</body>

</html>
