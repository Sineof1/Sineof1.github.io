<!DOCTYPE html>
<html lang='en'>
<head>
<title>Input-Output Puzzle</title>
<link rel='icon' href='https://lh6.googleusercontent.com/-VnLfzaTTCIQ/VSC_JKFIGnI/AAAAAAAAR68/4oDPXB7oOOQ/s144-no/nbk_favicon.gif'>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset = 'utf-8'>
<meta name='description' content='An input-output puzzle.'>
<meta name = 'author' content = 'Joshua D. Fisher'>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<style>
#black_box {
   position:relative;
   width:500px;
   height:250px;
   background:rgb(51, 51, 51);
   margin:50px auto 20px auto;
   padding-top:20px;
   overflow:hidden;
   border-radius:20px;
   box-shadow:0px 0px 30px #cccccc;
}

#box {
   position:absolute;
   left:32%;
   display:block;
   margin-top:10px;
   z-index:2;
}
#in_out {
   position:absolute;
   top: 120px;
   left:35px;
   width:100px;
   height:50px;
   font-size:22px;
   color:gray;
   text-align:center;
   border-radius:5px;
   border:none;
   z-index:1;
}
#in_out:focus {
   outline:none;
}
#intext {
   position:absolute;
   left:55px;
   top:80px;
   color:red;
   font-size:28px;
}
#outtext {
   position:absolute;
   left:385px;
   top:80px;
   color:red;
   font-size:28px;
}
#func_direc {
   position:absolute;
   left:55px;
   top:180px;
   color:red;
   font-size:22px;
   display:none;
   -moz-transform:rotateX(180deg);
   -webkit-transform:rotateX(180deg);
   transform:rotateX(180deg);
}
#options {
   color:#069;
   width:500px;
   text-align:right;
   font-size:16px;
   margin-left:auto;
   margin-right:auto;
}
#options:hover {
   cursor:pointer;
}

#enterInput {
   position:absolute;
   top: 120px;
   left:100px;
   width:300px;
   height:50px;
   font-size:22px;
   color:gray;
   text-align:center;
   border-radius:5px;
   border:none;
   z-index:1;
   display:none;
   -moz-transform:rotateX(180deg);
   -webkit-transform:rotateX(180deg);
   transform:rotateX(180deg);
}
@-moz-keyframes sendthru {
    from {-moz-transform:translate(0px);}       
    to {-moz-transform:translate(160px);}                       
}
@-webkit-keyframes sendthru {
    from{-webkit-transform:translate(0px);}       
    to {-webkit-transform:translate(160px);}                
}
@keyframes sendthru {
    from{transform:translate(0px);}       
    to {transform:translate(160px);}                
}
@-moz-keyframes getout {
    from {-moz-transform:translate(160px);}       
    to {-moz-transform:translate(340px);}                       
}
@-webkit-keyframes getout {
    from{-webkit-transform:translate(160px);}       
    to {-webkit-transform:translate(340px);}                
}
@keyframes getout {
    from{transform:translate(160px);}       
    to {transform:translate(340px);}                
}
@-moz-keyframes moveoff {
    from {-moz-transform:translate(340px);}       
    to {-moz-transform:translate(520px);}                       
}
@-webkit-keyframes moveoff {
    from{-webkit-transform:translate(340px);}       
    to {-webkit-transform:translate(520px);}                
}
@keyframes moveoff {
    from{transform:translate(340px);}       
    to {transform:translate(520px);}                
}
@-moz-keyframes comeback {
    from {-moz-transform:translate(-150px);}       
    to {-moz-transform:translate(0px);}                       
}
@-webkit-keyframes comeback {
    from{-webkit-transform:translate(-150px);}       
    to {-webkit-transform:translate(0px);}                
}
@keyframes comeback {
    from{transform:translate(-150px);}       
    to {transform:translate(0px);}                
}

@-moz-keyframes flipdiv {
    from {-moz-transform:rotateX(0deg);}       
    to {-moz-transform:rotateX(180deg);}                       
}
@-webkit-keyframes flipdiv {
    from{-webkit-transform:rotateX(0deg);}       
    to {-webkit-transform:rotateX(180deg);}                
}
@keyframes flipdiv {
    from{transform:rotateX(0deg);}       
    to {transform:rotateX(180deg);}                
}

@-moz-keyframes flipback{
    from {-moz-transform:rotateX(180deg);}       
    to {-moz-transform:rotateX(0deg);}                       
}
@-webkit-keyframes flipback {
    from{-webkit-transform:rotateX(180deg);}       
    to {-webkit-transform:rotateX(0deg);}                
}
@keyframes flipback {
    from{transform:rotateX(180deg);}       
    to {transform:rotateX(0deg);}                
}
</style>
</head>
<body>
<div id='black_box'>
<span id='func_direc'>Use x for variable. Press Enter when done.</span>
<div id='intext'>Input</div><div id='outtext'>Output</div>
<input name='input' id='in_out' type='text' autofocus>
<input name='user_input' id='enterInput' type='text' autofocus value='2 * x + 30'>
<svg id='box' width='200px' height='200px' viewBox='0 0 200 200' xlmns='http://www.w3.org/2000/svg' style='fill:black;stroke:white;stroke-width:1;'>
<rect x='5' y='45' width='150' height='150' />
<path d='M 155 195 L 195 155 L 195 5 L 155 45 Z' style='fill:rgba(0, 0, 0, 0.5);' />
<path d='M 195 5 L 45 5 L 5 45 L 155 45 Z' />
<line x1='195' y1='155' x2='155' y2='155' />
</svg>
</div>
<div id='options'>Flip</div>
</body>
<script>
var x;
var userFunc = '2 * x + 30';

$('#options').bind("click", menu);
$('input[name="user_input"]').bind('keypress', function(evt) {
   if (evt.keyCode === 13) {
      userFunc = $(this).val();
      back();
   }
});
$('input[name="input"]').bind('keypress', function(evt) {
   if(evt.keyCode === 13) {
    x = parseFloat($(this).val());
    if (!x && $(this).val() !== '0') return;
    $('#options').unbind("click");
    $(this).css({
        "-webkit-animation-name": 'sendthru',
        "-webkit-animation-duration" : "2s",
        "-webkit-animation-iteration-count" : "1",
        "-webkit-animation-timing-function" : "ease-in-out",
        "-webkit-animation-fill-mode" : "forwards"});
    $(this).css({
        "animation-name": 'sendthru',
        "animation-duration" : "2s",
        "animation-iteration-count" : "1",
        "animation-timing-function" : "ease-in-out",
        "animation-fill-mode" : "forwards"});
     setTimeout(secondAnim, 3000)}
});

function secondAnim() {
   $('input[name="input"]').val(eval(userFunc));
   $('input[name="input"]').prop('disabled', true);
   $('input[name="input"]').css({
        "-webkit-animation-name": 'getout',
        "-webkit-animation-duration" : "2s",
        "-webkit-animation-iteration-count" : "1",
        "-webkit-animation-timing-function" : "ease-in-out",
        "-webkit-animation-fill-mode" : "forwards"});
    $('input[name="input"]').css({
        "animation-name": 'getout',
        "animation-duration" : "2s",
        "animation-iteration-count" : "1",
        "animation-timing-function" : "ease-in-out",
        "animation-fill-mode" : "forwards"});
     setTimeout(thirdAnim, 3000)
}

function thirdAnim() {
   $('input[name="input"]').css({
        "-webkit-animation-name": 'moveoff',
        "-webkit-animation-duration" : "1s",
        "-webkit-animation-iteration-count" : "1",
        "-webkit-animation-timing-function" : "ease-in-out",
        "-webkit-animation-fill-mode" : "forwards"});
    $('input[name="input"]').css({
        "animation-name": 'moveoff',
        "animation-duration" : "1s",
        "animation-iteration-count" : "1",
        "animation-timing-function" : "ease-in-out",
        "animation-fill-mode" : "forwards"});
     setTimeout(fourthAnim, 1000)
}

function fourthAnim() {
   $('input[name="input"]').val('');
   $('input[name="input"]').prop('disabled', false);
   $('input[name="input"]').css({
        "-webkit-animation-name": 'comeback',
        "-webkit-animation-duration" : "1s",
        "-webkit-animation-iteration-count" : "1",
        "-webkit-animation-timing-function" : "ease-in-out",
        "-webkit-animation-fill-mode" : "forwards"});
    $('input[name="input"]').css({
        "animation-name": 'comeback',
        "animation-duration" : "1s",
        "animation-iteration-count" : "1",
        "animation-timing-function" : "ease-in-out",
        "animation-fill-mode" : "forwards"});
    $('input[name="input"]').focus();
    $('#options').bind("click", menu);
}
function menu() {
   $('#black_box').css({
   "-webkit-animation-name": 'flipdiv',
   "-webkit-animation-duration" : "1s",
   "-webkit-animation-iteration-count" : "1",
   "-webkit-animation-fill-mode" : "forwards"});
   $('#black_box').css({
   "animation-name": 'flipdiv',
   "animation-duration" : "1s",
   "animation-iteration-count" : "1"});
   setTimeout(function() {
      $('#box').hide();
      $('input[name="input"]').hide();
      $('#intext').hide();
      $('#outtext').hide();
      $('#enterInput').show();
      $('#func_direc').show();
   }, 300);
   $('#options').bind("click", back);
}

function back() {
   $('#black_box').css({
   "-webkit-animation-name": 'flipback',
   "-webkit-animation-duration" : "1s",
   "-webkit-animation-iteration-count" : "1",
   "-webkit-animation-fill-mode" : "forwards"});
   $('#black_box').css({
   "animation-name": 'flipback',
   "animation-duration" : "1s",
   "animation-iteration-count" : "1"});
   setTimeout(function() {
      $('#box').show();
      $('input[name="input"]').show();
      $('#intext').show();
      $('#outtext').show();
      $('#enterInput').hide();
      $('#func_direc').hide();
   }, 300);
   $('#options').bind("click", menu);
}
</script>
</html>
